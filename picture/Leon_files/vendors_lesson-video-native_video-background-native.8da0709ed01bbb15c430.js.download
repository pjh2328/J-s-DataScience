(window.wpJsonpTemplateSections=window.wpJsonpTemplateSections||[]).push([[22],{122:function(e,t){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports.__esModule=!0,e.exports.default=e.exports},123:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},124:function(e,t){function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},130:function(e,t){function i(t){return e.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,i(t)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},131:function(e,t,i){var n=i(209);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},132:function(e,t,i){var n=i(193).default,s=i(137);e.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)},e.exports.__esModule=!0,e.exports.default=e.exports},137:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},151:function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},193:function(e,t){function i(t){return e.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,i(t)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},202:function(e,t){function i(e,t,i,n,s,a,r){try{var o=e[a](r),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(n,s)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(s,a){var r=e.apply(t,n);function o(e){i(r,s,a,o,l,"next",e)}function l(e){i(r,s,a,o,l,"throw",e)}o(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},203:function(e,t,i){e.exports=i(1)},209:function(e,t){function i(t,n){return e.exports=i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,i(t,n)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},289:function(e,t,i){var n=i(130),s=i(209),a=i(545),r=i(546);function o(t){var i="function"==typeof Map?new Map:void 0;return e.exports=o=function(e){if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(e))return i.get(e);i.set(e,t)}function t(){return r(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),s(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,o(t)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},348:function(e,t){!function(){if("undefined"!=typeof window)try{var e=new window.CustomEvent("test",{cancelable:!0});if(e.preventDefault(),!0!==e.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var t=function(e,t){var i,n;return(t=t||{}).bubbles=!!t.bubbles,t.cancelable=!!t.cancelable,(i=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n=i.preventDefault,i.preventDefault=function(){n.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},i};t.prototype=window.Event.prototype,window.CustomEvent=t}}()},349:function(e,t,i){(function(e){!function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return!1}}(),i=function(e){var i={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(i[Symbol.iterator]=function(){return i}),i},n=function(e){return encodeURIComponent(e).replace(/%20/g,"+")},s=function(e){return decodeURIComponent(String(e).replace(/\+/g," "))};(function(){try{var t=e.URLSearchParams;return"a=1"===new t("?a=1").toString()&&"function"==typeof t.prototype.set&&"function"==typeof t.prototype.entries}catch(e){return!1}})()||function(){var s=function(e){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var t=typeof e;if("undefined"===t);else if("string"===t)""!==e&&this._fromString(e);else if(e instanceof s){var i=this;e.forEach((function(e,t){i.append(t,e)}))}else{if(null===e||"object"!==t)throw new TypeError("Unsupported input's type for URLSearchParams");if("[object Array]"===Object.prototype.toString.call(e))for(var n=0;n<e.length;n++){var a=e[n];if("[object Array]"!==Object.prototype.toString.call(a)&&2===a.length)throw new TypeError("Expected [string, any] as entry at index "+n+" of URLSearchParams's input");this.append(a[0],a[1])}else for(var r in e)e.hasOwnProperty(r)&&this.append(r,e[r])}},a=s.prototype;a.append=function(e,t){e in this._entries?this._entries[e].push(String(t)):this._entries[e]=[String(t)]},a.delete=function(e){delete this._entries[e]},a.get=function(e){return e in this._entries?this._entries[e][0]:null},a.getAll=function(e){return e in this._entries?this._entries[e].slice(0):[]},a.has=function(e){return e in this._entries},a.set=function(e,t){this._entries[e]=[String(t)]},a.forEach=function(e,t){var i;for(var n in this._entries)if(this._entries.hasOwnProperty(n)){i=this._entries[n];for(var s=0;s<i.length;s++)e.call(t,i[s],n,this)}},a.keys=function(){var e=[];return this.forEach((function(t,i){e.push(i)})),i(e)},a.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),i(e)},a.entries=function(){var e=[];return this.forEach((function(t,i){e.push([i,t])})),i(e)},t&&(a[Symbol.iterator]=a.entries),a.toString=function(){var e=[];return this.forEach((function(t,i){e.push(n(i)+"="+n(t))})),e.join("&")},e.URLSearchParams=s}();var a=e.URLSearchParams.prototype;"function"!=typeof a.sort&&(a.sort=function(){var e=this,t=[];this.forEach((function(i,n){t.push([n,i]),e._entries||e.delete(n)})),t.sort((function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0})),e._entries&&(e._entries={});for(var i=0;i<t.length;i++)this.append(t[i][0],t[i][1])}),"function"!=typeof a._fromString&&Object.defineProperty(a,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(e){if(this._entries)this._entries={};else{var t=[];this.forEach((function(e,i){t.push(i)}));for(var i=0;i<t.length;i++)this.delete(t[i])}var n,a=(e=e.replace(/^\?/,"")).split("&");for(i=0;i<a.length;i++)n=a[i].split("="),this.append(s(n[0]),n.length>1?s(n[1]):"")}})}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this),function(e){if(function(){try{var t=new e.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href&&t.searchParams}catch(e){return!1}}()||function(){var t=e.URL,i=function(t,i){"string"!=typeof t&&(t=String(t)),i&&"string"!=typeof i&&(i=String(i));var n,s=document;if(i&&(void 0===e.location||i!==e.location.href)){i=i.toLowerCase(),(n=(s=document.implementation.createHTMLDocument("")).createElement("base")).href=i,s.head.appendChild(n);try{if(0!==n.href.indexOf(i))throw new Error(n.href)}catch(e){throw new Error("URL unable to set base "+i+" due to "+e)}}var a=s.createElement("a");a.href=t,n&&(s.body.appendChild(a),a.href=a.href);var r=s.createElement("input");if(r.type="url",r.value=t,":"===a.protocol||!/:/.test(a.href)||!r.checkValidity()&&!i)throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:a});var o=new e.URLSearchParams(this.search),l=!0,u=!0,c=this;["append","delete","set"].forEach((function(e){var t=o[e];o[e]=function(){t.apply(o,arguments),l&&(u=!1,c.search=o.toString(),u=!0)}})),Object.defineProperty(this,"searchParams",{value:o,enumerable:!0});var d=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==d&&(d=this.search,u&&(l=!1,this.searchParams._fromString(this.search),l=!0))}})},n=i.prototype;["hash","host","hostname","port","protocol"].forEach((function(e){!function(e){Object.defineProperty(n,e,{get:function(){return this._anchorElement[e]},set:function(t){this._anchorElement[e]=t},enumerable:!0})}(e)})),Object.defineProperty(n,"search",{get:function(){return this._anchorElement.search},set:function(e){this._anchorElement.search=e,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(n,{toString:{get:function(){var e=this;return function(){return e.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(e){this._anchorElement.href=e,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(e){this._anchorElement.pathname=e},enumerable:!0},origin:{get:function(){var e={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],t=this._anchorElement.port!=e&&""!==this._anchorElement.port;return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(t?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(e){},enumerable:!0},username:{get:function(){return""},set:function(e){},enumerable:!0}}),i.createObjectURL=function(e){return t.createObjectURL.apply(t,arguments)},i.revokeObjectURL=function(e){return t.revokeObjectURL.apply(t,arguments)},e.URL=i}(),void 0!==e.location&&!("origin"in e.location)){var t=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")};try{Object.defineProperty(e.location,"origin",{get:t,enumerable:!0})}catch(i){setInterval((function(){e.location.origin=t()}),100)}}}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this)}).call(this,i(151))},361:function(e,t,i){(function(t){"object"==typeof navigator&&(e.exports=function(){"use strict";function e(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var r={addCSS:!0,thumbWidth:15,watch:!0};function o(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}var l=function(e){return null!=e?e.constructor:null},u=function(e,t){return!!(e&&t&&e instanceof t)},c=function(e){return l(e)===String},d=function(e){return Array.isArray(e)},h=function(e){return u(e,NodeList)},p=c,f=d,m=h,g=function(e){return u(e,Element)},y=function(e){return u(e,Event)},v=function(e){return function(e){return null==e}(e)||(c(e)||d(e)||h(e))&&!e.length||function(e){return l(e)===Object}(e)&&!Object.keys(e).length},b=function(){function e(t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),g(t)?this.element=t:p(t)&&(this.element=document.querySelector(t)),g(this.element)&&v(this.element.rangeTouch)&&(this.config=a({},r,{},i),this.init())}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,i=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(e){t.element[i](e,(function(e){return t.set(e)}),!1)}))}},{key:"get",value:function(t){if(!e.enabled||!y(t))return null;var i,n=t.target,s=t.changedTouches[0],a=parseFloat(n.getAttribute("min"))||0,r=parseFloat(n.getAttribute("max"))||100,o=parseFloat(n.getAttribute("step"))||1,l=n.getBoundingClientRect(),u=100/l.width*(this.config.thumbWidth/2)/100;return 0>(i=100/l.width*(s.clientX-l.left))?i=0:100<i&&(i=100),50>i?i-=(100-2*i)*u:50<i&&(i+=2*(i-50)*u),a+function(e,t){if(1>t){var i=function(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}(t);return parseFloat(e.toFixed(i))}return Math.round(e/t)*t}(i/100*(r-a),o)}},{key:"set",value:function(t){e.enabled&&y(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),function(e,t){if(e&&t){var i=new Event(t,{bubbles:!0});e.dispatchEvent(i)}}(t.target,"touchend"===t.type?"change":"input"))}}],[{key:"setup",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=null;if(v(t)||p(t)?n=Array.from(document.querySelectorAll(p(t)?t:'input[type="range"]')):g(t)?n=[t]:m(t)?n=Array.from(t):f(t)&&(n=t.filter(g)),v(n))return null;var s=a({},r,{},i);if(p(t)&&s.watch){var l=new MutationObserver((function(i){Array.from(i).forEach((function(i){Array.from(i.addedNodes).forEach((function(i){g(i)&&o(i,t)&&new e(i,s)}))}))}));l.observe(document.body,{childList:!0,subtree:!0})}return n.map((function(t){return new e(t,i)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}();const _=e=>null!=e?e.constructor:null,w=(e,t)=>Boolean(e&&t&&e instanceof t),T=e=>null==e,k=e=>_(e)===Object,E=e=>_(e)===String,x=e=>_(e)===Function,S=e=>Array.isArray(e),P=e=>w(e,NodeList),A=e=>T(e)||(E(e)||S(e)||P(e))&&!e.length||k(e)&&!Object.keys(e).length;var M=T,C=k,D=e=>_(e)===Number&&!Number.isNaN(e),I=E,L=e=>_(e)===Boolean,O=x,q=S,R=P,N=e=>null!==e&&"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument,j=e=>w(e,Event),H=e=>w(e,KeyboardEvent),F=e=>w(e,TextTrack)||!T(e)&&E(e.kind),U=e=>{if(w(e,window.URL))return!0;if(!E(e))return!1;let t=e;e.startsWith("http://")&&e.startsWith("https://")||(t="http://"+e);try{return!A(new URL(t).hostname)}catch(e){return!1}},B=A;const V=(()=>{const e=document.createElement("span"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},i=Object.keys(t).find(t=>void 0!==e.style[t]);return!!I(i)&&t[i]})();function $(e,t){setTimeout(()=>{try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(e){}},t)}const W={isIE:Boolean(window.document.documentMode),isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1||/(iPad|iPhone|iPod)/gi.test(navigator.platform)};function z(e,t){return t.split(".").reduce((e,t)=>e&&e[t],e)}function J(e={},...t){if(!t.length)return e;const i=t.shift();return C(i)?(Object.keys(i).forEach(t=>{C(i[t])?(Object.keys(e).includes(t)||Object.assign(e,{[t]:{}}),J(e[t],i[t])):Object.assign(e,{[t]:i[t]})}),J(e,...t)):e}function G(e,t){const i=e.length?e:[e];Array.from(i).reverse().forEach((e,i)=>{const n=i>0?t.cloneNode(!0):t,s=e.parentNode,a=e.nextSibling;n.appendChild(e),a?s.insertBefore(n,a):s.appendChild(n)})}function Q(e,t){N(e)&&!B(t)&&Object.entries(t).filter(([,e])=>!M(e)).forEach(([t,i])=>e.setAttribute(t,i))}function K(e,t,i){const n=document.createElement(e);return C(t)&&Q(n,t),I(i)&&(n.innerText=i),n}function Y(e,t,i,n){N(t)&&t.appendChild(K(e,i,n))}function X(e){R(e)||q(e)?Array.from(e).forEach(X):N(e)&&N(e.parentNode)&&e.parentNode.removeChild(e)}function Z(e){if(!N(e))return;let{length:t}=e.childNodes;for(;t>0;)e.removeChild(e.lastChild),t-=1}function ee(e,t){return N(t)&&N(t.parentNode)&&N(e)?(t.parentNode.replaceChild(e,t),e):null}function te(e,t){if(!I(e)||B(e))return{};const i={},n=J({},t);return e.split(",").forEach(e=>{const t=e.trim(),s=t.replace(".",""),a=t.replace(/[[\]]/g,"").split("="),[r]=a,o=a.length>1?a[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":I(n.class)?i.class=`${n.class} ${s}`:i.class=s;break;case"#":i.id=t.replace("#","");break;case"[":i[r]=o}}),J(n,i)}function ie(e,t){if(!N(e))return;let i=t;L(i)||(i=!e.hidden),e.hidden=i}function ne(e,t,i){if(R(e))return Array.from(e).map(e=>ne(e,t,i));if(N(e)){let n="toggle";return void 0!==i&&(n=i?"add":"remove"),e.classList[n](t),e.classList.contains(t)}return!1}function se(e,t){return N(e)&&e.classList.contains(t)}function ae(e,t){const{prototype:i}=Element;return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function re(e){return this.elements.container.querySelectorAll(e)}function oe(e){return this.elements.container.querySelector(e)}function le(e=null,t=!1){N(e)&&(e.focus({preventScroll:!0}),t&&ne(e,this.config.classNames.tabFocus))}const ue={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},ce={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(e,t,i){const n=W.isIPhone&&i&&ce.playsinline,s=ce[e]||"html5"!==t;return{api:s,ui:s&&ce.rangeInput&&("video"!==e||!W.isIPhone||n)}},pip:!(W.isIPhone||!O(K("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||K("video").disablePictureInPicture)),airplay:O(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(e){if(B(e))return!1;const[t]=e.split("/");let i=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(ue).includes(i)&&(i+=`; codecs="${ue[e]}"`);try{return Boolean(i&&this.media.canPlayType(i).replace(/no/,""))}catch(e){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const e=document.createElement("input");return e.type="range","range"===e.type})(),touch:"ontouchstart"in document.documentElement,transitions:!1!==V,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},de=(()=>{let e=!1;try{const t=Object.defineProperty({},"passive",{get:()=>(e=!0,null)});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e})();function he(e,t,i,n=!1,s=!0,a=!1){if(!e||!("addEventListener"in e)||B(t)||!O(i))return;const r=t.split(" ");let o=a;de&&(o={passive:s,capture:a}),r.forEach(t=>{this&&this.eventListeners&&n&&this.eventListeners.push({element:e,type:t,callback:i,options:o}),e[n?"addEventListener":"removeEventListener"](t,i,o)})}function pe(e,t="",i,n=!0,s=!1){he.call(this,e,t,i,!0,n,s)}function fe(e,t="",i,n=!0,s=!1){he.call(this,e,t,i,!1,n,s)}function me(e,t="",i,n=!0,s=!1){const a=(...r)=>{fe(e,t,a,n,s),i.apply(this,r)};he.call(this,e,t,a,!0,n,s)}function ge(e,t="",i=!1,n={}){if(!N(e)||B(t))return;const s=new CustomEvent(t,{bubbles:i,detail:{...n,plyr:this}});e.dispatchEvent(s)}function ye(){this&&this.eventListeners&&(this.eventListeners.forEach(e=>{const{element:t,type:i,callback:n,options:s}=e;t.removeEventListener(i,n,s)}),this.eventListeners=[])}function ve(){return new Promise(e=>this.ready?setTimeout(e,0):pe.call(this,this.elements.container,"ready",e)).then(()=>{})}function be(e){(e=>w(e,Promise)&&x(e.then))(e)&&e.then(null,()=>{})}function _e(e){return q(e)?e.filter((t,i)=>e.indexOf(t)===i):e}function we(e,t){return q(e)&&e.length?e.reduce((e,i)=>Math.abs(i-t)<Math.abs(e-t)?i:e):null}function Te(e){return!(!window||!window.CSS)&&window.CSS.supports(e)}const ke=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((e,[t,i])=>({...e,[t/i]:[t,i]}),{});function Ee(e){return!!(q(e)||I(e)&&e.includes(":"))&&(q(e)?e:e.split(":")).map(Number).every(D)}function xe(e){if(!q(e)||!e.every(D))return null;const[t,i]=e,n=(e,t)=>0===t?e:n(t,e%t),s=n(t,i);return[t/s,i/s]}function Se(e){const t=e=>Ee(e)?e.split(":").map(Number):null;let i=t(e);if(null===i&&(i=t(this.config.ratio)),null===i&&!B(this.embed)&&q(this.embed.ratio)&&({ratio:i}=this.embed),null===i&&this.isHTML5){const{videoWidth:e,videoHeight:t}=this.media;i=[e,t]}return xe(i)}function Pe(e){if(!this.isVideo)return{};const{wrapper:t}=this.elements,i=Se.call(this,e);if(!q(i))return{};const[n,s]=xe(i),a=100/n*s;if(Te(`aspect-ratio: ${n}/${s}`)?t.style.aspectRatio=`${n}/${s}`:t.style.paddingBottom=a+"%",this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const e=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),i=(e-a)/(e/50);this.fullscreen.active?t.style.paddingBottom=null:this.media.style.transform=`translateY(-${i}%)`}else this.isHTML5&&t.classList.add(this.config.classNames.videoFixedRatio);return{padding:a,ratio:i}}function Ae(e,t,i=.05){const n=e/t,s=we(Object.keys(ke),n);return Math.abs(s-n)<=i?ke[s]:[e,t]}const Me={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(e=>{const t=e.getAttribute("type");return!!B(t)||ce.mime.call(this,t)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:Me.getSources.call(this).map(e=>Number(e.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const e=this;e.options.speed=e.config.speed.options,B(this.config.ratio)||Pe.call(e),Object.defineProperty(e.media,"quality",{get(){const t=Me.getSources.call(e).find(t=>t.getAttribute("src")===e.source);return t&&Number(t.getAttribute("size"))},set(t){if(e.quality!==t){if(e.config.quality.forced&&O(e.config.quality.onChange))e.config.quality.onChange(t);else{const i=Me.getSources.call(e).find(e=>Number(e.getAttribute("size"))===t);if(!i)return;const{currentTime:n,paused:s,preload:a,readyState:r,playbackRate:o}=e.media;e.media.src=i.getAttribute("src"),("none"!==a||r)&&(e.once("loadedmetadata",()=>{e.speed=o,e.currentTime=n,s||be(e.play())}),e.media.load())}ge.call(e,e.media,"qualitychange",!1,{quality:t})}}})},cancelRequests(){this.isHTML5&&(X(Me.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function Ce(e,...t){return B(e)?e:e.toString().replace(/{(\d+)}/g,(e,i)=>t[i].toString())}const De=(e="",t="",i="")=>e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),i.toString()),Ie=(e="")=>e.toString().replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());function Le(e){const t=document.createElement("div");return t.appendChild(e),t.innerHTML}const Oe={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},qe={get(e="",t={}){if(B(e)||B(t))return"";let i=z(t.i18n,e);if(B(i))return Object.keys(Oe).includes(e)?Oe[e]:"";const n={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(n).forEach(([e,t])=>{i=De(i,e,t)}),i}};class Re{constructor(t){e(this,"get",e=>{if(!Re.supported||!this.enabled)return null;const t=window.localStorage.getItem(this.key);if(B(t))return null;const i=JSON.parse(t);return I(e)&&e.length?i[e]:i}),e(this,"set",e=>{if(!Re.supported||!this.enabled)return;if(!C(e))return;let t=this.get();B(t)&&(t={}),J(t,e);try{window.localStorage.setItem(this.key,JSON.stringify(t))}catch(e){}}),this.enabled=t.config.storage.enabled,this.key=t.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}}function Ne(e,t="text"){return new Promise((i,n)=>{try{const n=new XMLHttpRequest;if(!("withCredentials"in n))return;n.addEventListener("load",()=>{if("text"===t)try{i(JSON.parse(n.responseText))}catch(e){i(n.responseText)}else i(n.response)}),n.addEventListener("error",()=>{throw new Error(n.status)}),n.open("GET",e,!0),n.responseType=t,n.send()}catch(e){n(e)}})}function je(e,t){if(!I(e))return;const i=I(t);let n=!1;const s=()=>null!==document.getElementById(t),a=(e,t)=>{e.innerHTML=t,i&&s()||document.body.insertAdjacentElement("afterbegin",e)};if(!i||!s()){const s=Re.supported,r=document.createElement("div");if(r.setAttribute("hidden",""),i&&r.setAttribute("id",t),s){const e=window.localStorage.getItem("cache-"+t);if(n=null!==e,n){const t=JSON.parse(e);a(r,t.content)}}Ne(e).then(e=>{if(!B(e)){if(s)try{window.localStorage.setItem("cache-"+t,JSON.stringify({content:e}))}catch(e){}a(r,e)}}).catch(()=>{})}}const He=e=>Math.trunc(e/60/60%60,10);function Fe(e=0,t=!1,i=!1){if(!D(e))return Fe(void 0,t,i);const n=e=>("0"+e).slice(-2);let s=He(e);const a=(r=e,Math.trunc(r/60%60,10));var r;const o=(e=>Math.trunc(e%60,10))(e);return s=t||s>0?s+":":"",`${i&&e>0?"-":""}${s}${n(a)}:${n(o)}`}const Ue={getIconUrl(){const e=new URL(this.config.iconUrl,window.location),t=window.location.host?window.location.host:window.top.location.host,i=e.host!==t||W.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:i}},findElements(){try{return this.elements.controls=oe.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:re.call(this,this.config.selectors.buttons.play),pause:oe.call(this,this.config.selectors.buttons.pause),restart:oe.call(this,this.config.selectors.buttons.restart),rewind:oe.call(this,this.config.selectors.buttons.rewind),fastForward:oe.call(this,this.config.selectors.buttons.fastForward),mute:oe.call(this,this.config.selectors.buttons.mute),pip:oe.call(this,this.config.selectors.buttons.pip),airplay:oe.call(this,this.config.selectors.buttons.airplay),settings:oe.call(this,this.config.selectors.buttons.settings),captions:oe.call(this,this.config.selectors.buttons.captions),fullscreen:oe.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=oe.call(this,this.config.selectors.progress),this.elements.inputs={seek:oe.call(this,this.config.selectors.inputs.seek),volume:oe.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:oe.call(this,this.config.selectors.display.buffer),currentTime:oe.call(this,this.config.selectors.display.currentTime),duration:oe.call(this,this.config.selectors.display.duration)},N(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector("."+this.config.classNames.tooltip)),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon(e,t){const i="http://www.w3.org/2000/svg",n=Ue.getIconUrl.call(this),s=`${n.cors?"":n.url}#${this.config.iconPrefix}`,a=document.createElementNS(i,"svg");Q(a,J(t,{"aria-hidden":"true",focusable:"false"}));const r=document.createElementNS(i,"use"),o=`${s}-${e}`;return"href"in r&&r.setAttributeNS("http://www.w3.org/1999/xlink","href",o),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),a.appendChild(r),a},createLabel(e,t={}){const i=qe.get(e,this.config);return K("span",{...t,class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")},i)},createBadge(e){if(B(e))return null;const t=K("span",{class:this.config.classNames.menu.value});return t.appendChild(K("span",{class:this.config.classNames.menu.badge},e)),t},createButton(e,t){const i=J({},t);let n=function(e=""){let t=e.toString();return t=function(e=""){let t=e.toString();return t=De(t,"-"," "),t=De(t,"_"," "),t=Ie(t),De(t," ","")}(t),t.charAt(0).toLowerCase()+t.slice(1)}(e);const s={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(e=>{Object.keys(i).includes(e)&&(s[e]=i[e],delete i[e])}),"button"!==s.element||Object.keys(i).includes("type")||(i.type="button"),Object.keys(i).includes("class")?i.class.split(" ").some(e=>e===this.config.classNames.control)||J(i,{class:`${i.class} ${this.config.classNames.control}`}):i.class=this.config.classNames.control,e){case"play":s.toggle=!0,s.label="play",s.labelPressed="pause",s.icon="play",s.iconPressed="pause";break;case"mute":s.toggle=!0,s.label="mute",s.labelPressed="unmute",s.icon="volume",s.iconPressed="muted";break;case"captions":s.toggle=!0,s.label="enableCaptions",s.labelPressed="disableCaptions",s.icon="captions-off",s.iconPressed="captions-on";break;case"fullscreen":s.toggle=!0,s.label="enterFullscreen",s.labelPressed="exitFullscreen",s.icon="enter-fullscreen",s.iconPressed="exit-fullscreen";break;case"play-large":i.class+=` ${this.config.classNames.control}--overlaid`,n="play",s.label="play",s.icon="play";break;default:B(s.label)&&(s.label=n),B(s.icon)&&(s.icon=e)}const a=K(s.element);return s.toggle?(a.appendChild(Ue.createIcon.call(this,s.iconPressed,{class:"icon--pressed"})),a.appendChild(Ue.createIcon.call(this,s.icon,{class:"icon--not-pressed"})),a.appendChild(Ue.createLabel.call(this,s.labelPressed,{class:"label--pressed"})),a.appendChild(Ue.createLabel.call(this,s.label,{class:"label--not-pressed"}))):(a.appendChild(Ue.createIcon.call(this,s.icon)),a.appendChild(Ue.createLabel.call(this,s.label))),J(i,te(this.config.selectors.buttons[n],i)),Q(a,i),"play"===n?(q(this.elements.buttons[n])||(this.elements.buttons[n]=[]),this.elements.buttons[n].push(a)):this.elements.buttons[n]=a,a},createRange(e,t){const i=K("input",J(te(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":qe.get(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=i,Ue.updateRangeFill.call(this,i),b.setup(i),i},createProgress(e,t){const i=K("progress",J(te(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if("volume"!==e){i.appendChild(K("span",null,"0"));const t={played:"played",buffer:"buffered"}[e],n=t?qe.get(t,this.config):"";i.innerText="% "+n.toLowerCase()}return this.elements.display[e]=i,i},createTime(e,t){const i=te(this.config.selectors.display[e],t),n=K("div",J(i,{class:`${i.class?i.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":qe.get(e,this.config)}),"00:00");return this.elements.display[e]=n,n},bindMenuItemShortcuts(e,t){pe.call(this,e,"keydown keyup",i=>{if(!["Space","ArrowUp","ArrowDown","ArrowRight"].includes(i.key))return;if(i.preventDefault(),i.stopPropagation(),"keydown"===i.type)return;const n=ae(e,'[role="menuitemradio"]');if(!n&&["Space","ArrowRight"].includes(i.key))Ue.showMenuPanel.call(this,t,!0);else{let t;"Space"!==i.key&&("ArrowDown"===i.key||n&&"ArrowRight"===i.key?(t=e.nextElementSibling,N(t)||(t=e.parentNode.firstElementChild)):(t=e.previousElementSibling,N(t)||(t=e.parentNode.lastElementChild)),le.call(this,t,!0))}},!1),pe.call(this,e,"keyup",e=>{"Return"===e.key&&Ue.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:e,list:t,type:i,title:n,badge:s=null,checked:a=!1}){const r=te(this.config.selectors.inputs[i]),o=K("button",J(r,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${r.class?r.class:""}`.trim(),"aria-checked":a,value:e})),l=K("span");l.innerHTML=n,N(s)&&l.appendChild(s),o.appendChild(l),Object.defineProperty(o,"checked",{enumerable:!0,get:()=>"true"===o.getAttribute("aria-checked"),set(e){e&&Array.from(o.parentNode.children).filter(e=>ae(e,'[role="menuitemradio"]')).forEach(e=>e.setAttribute("aria-checked","false")),o.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(o,"click keyup",t=>{if(!H(t)||"Space"===t.key){switch(t.preventDefault(),t.stopPropagation(),o.checked=!0,i){case"language":this.currentTrack=Number(e);break;case"quality":this.quality=e;break;case"speed":this.speed=parseFloat(e)}Ue.showMenuPanel.call(this,"home",H(t))}},i,!1),Ue.bindMenuItemShortcuts.call(this,o,i),t.appendChild(o)},formatTime(e=0,t=!1){return D(e)?Fe(e,He(this.duration)>0,t):e},updateTimeDisplay(e=null,t=0,i=!1){N(e)&&D(t)&&(e.innerText=Ue.formatTime(t,i))},updateVolume(){this.supported.ui&&(N(this.elements.inputs.volume)&&Ue.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),N(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange(e,t=0){N(e)&&(e.value=t,Ue.updateRangeFill.call(this,e))},updateProgress(e){if(!this.supported.ui||!j(e))return;let t=0;const i=(e,t)=>{const i=D(t)?t:0,n=N(e)?e:this.elements.display.buffer;if(N(n)){n.value=i;const e=n.getElementsByTagName("span")[0];N(e)&&(e.childNodes[0].nodeValue=i)}};if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":n=this.currentTime,s=this.duration,t=0===n||0===s||Number.isNaN(n)||Number.isNaN(s)?0:(n/s*100).toFixed(2),"timeupdate"===e.type&&Ue.setRange.call(this,this.elements.inputs.seek,t);break;case"playing":case"progress":i(this.elements.display.buffer,100*this.buffered)}var n,s},updateRangeFill(e){const t=j(e)?e.target:e;if(N(t)&&"range"===t.getAttribute("type")){if(ae(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);const e=Ue.formatTime(this.currentTime),i=Ue.formatTime(this.duration),n=qe.get("seekLabel",this.config);t.setAttribute("aria-valuetext",n.replace("{currentTime}",e).replace("{duration}",i))}else if(ae(t,this.config.selectors.inputs.volume)){const e=100*t.value;t.setAttribute("aria-valuenow",e),t.setAttribute("aria-valuetext",e.toFixed(1)+"%")}else t.setAttribute("aria-valuenow",t.value);W.isWebkit&&t.style.setProperty("--value",t.value/t.max*100+"%")}},updateSeekTooltip(e){var t,i;if(!this.config.tooltips.seek||!N(this.elements.inputs.seek)||!N(this.elements.display.seekTooltip)||0===this.duration)return;const n=this.elements.display.seekTooltip,s=this.config.classNames.tooltip+"--visible",a=e=>ne(n,s,e);if(this.touch)return void a(!1);let r=0;const o=this.elements.progress.getBoundingClientRect();if(j(e))r=100/o.width*(e.pageX-o.left);else{if(!se(n,s))return;r=parseFloat(n.style.left,10)}r<0?r=0:r>100&&(r=100);const l=this.duration/100*r;n.innerText=Ue.formatTime(l);const u=null===(t=this.config.markers)||void 0===t||null===(i=t.points)||void 0===i?void 0:i.find(({time:e})=>e===Math.round(l));u&&n.insertAdjacentHTML("afterbegin",u.label+"<br>"),n.style.left=r+"%",j(e)&&["mouseenter","mouseleave"].includes(e.type)&&a("mouseenter"===e.type)},timeUpdate(e){const t=!N(this.elements.display.duration)&&this.config.invertTime;Ue.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||Ue.updateProgress.call(this,e)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return ie(this.elements.display.currentTime,!0),void ie(this.elements.progress,!0);N(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const e=N(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&Ue.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&Ue.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&Ue.setMarkers.call(this),Ue.updateSeekTooltip.call(this)},toggleMenuButton(e,t){ie(this.elements.settings.buttons[e],!t)},updateSetting(e,t,i){const n=this.elements.settings.panels[e];let s=null,a=t;if("captions"===e)s=this.currentTrack;else{if(s=B(i)?this[e]:i,B(s)&&(s=this.config[e].default),!B(this.options[e])&&!this.options[e].includes(s))return void this.debug.warn(`Unsupported value of '${s}' for ${e}`);if(!this.config[e].options.includes(s))return void this.debug.warn(`Disabled value of '${s}' for ${e}`)}if(N(a)||(a=n&&n.querySelector('[role="menu"]')),!N(a))return;this.elements.settings.buttons[e].querySelector("."+this.config.classNames.menu.value).innerHTML=Ue.getLabel.call(this,e,s);const r=a&&a.querySelector(`[value="${s}"]`);N(r)&&(r.checked=!0)},getLabel(e,t){switch(e){case"speed":return 1===t?qe.get("normal",this.config):t+"&times;";case"quality":if(D(t)){const e=qe.get("qualityLabel."+t,this.config);return e.length?e:t+"p"}return Ie(t);case"captions":return $e.getLabel.call(this);default:return null}},setQualityMenu(e){if(!N(this.elements.settings.panels.quality))return;const t="quality",i=this.elements.settings.panels.quality.querySelector('[role="menu"]');q(e)&&(this.options.quality=_e(e).filter(e=>this.config.quality.options.includes(e)));const n=!B(this.options.quality)&&this.options.quality.length>1;if(Ue.toggleMenuButton.call(this,t,n),Z(i),Ue.checkMenu.call(this),!n)return;const s=e=>{const t=qe.get("qualityBadge."+e,this.config);return t.length?Ue.createBadge.call(this,t):null};this.options.quality.sort((e,t)=>{const i=this.config.quality.options;return i.indexOf(e)>i.indexOf(t)?1:-1}).forEach(e=>{Ue.createMenuItem.call(this,{value:e,list:i,type:t,title:Ue.getLabel.call(this,"quality",e),badge:s(e)})}),Ue.updateSetting.call(this,t,i)},setCaptionsMenu(){if(!N(this.elements.settings.panels.captions))return;const e="captions",t=this.elements.settings.panels.captions.querySelector('[role="menu"]'),i=$e.getTracks.call(this),n=Boolean(i.length);if(Ue.toggleMenuButton.call(this,e,n),Z(t),Ue.checkMenu.call(this),!n)return;const s=i.map((e,i)=>({value:i,checked:this.captions.toggled&&this.currentTrack===i,title:$e.getLabel.call(this,e),badge:e.language&&Ue.createBadge.call(this,e.language.toUpperCase()),list:t,type:"language"}));s.unshift({value:-1,checked:!this.captions.toggled,title:qe.get("disabled",this.config),list:t,type:"language"}),s.forEach(Ue.createMenuItem.bind(this)),Ue.updateSetting.call(this,e,t)},setSpeedMenu(){if(!N(this.elements.settings.panels.speed))return;const e="speed",t=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(e=>e>=this.minimumSpeed&&e<=this.maximumSpeed);const i=!B(this.options.speed)&&this.options.speed.length>1;Ue.toggleMenuButton.call(this,e,i),Z(t),Ue.checkMenu.call(this),i&&(this.options.speed.forEach(i=>{Ue.createMenuItem.call(this,{value:i,list:t,type:e,title:Ue.getLabel.call(this,"speed",i)})}),Ue.updateSetting.call(this,e,t))},checkMenu(){const{buttons:e}=this.elements.settings,t=!B(e)&&Object.values(e).some(e=>!e.hidden);ie(this.elements.settings.menu,!t)},focusFirstMenuItem(e,t=!1){if(this.elements.settings.popup.hidden)return;let i=e;N(i)||(i=Object.values(this.elements.settings.panels).find(e=>!e.hidden));const n=i.querySelector('[role^="menuitem"]');le.call(this,n,t)},toggleMenu(e){const{popup:t}=this.elements.settings,i=this.elements.buttons.settings;if(!N(t)||!N(i))return;const{hidden:n}=t;let s=n;if(L(e))s=e;else if(H(e)&&"Escape"===e.key)s=!1;else if(j(e)){const n=O(e.composedPath)?e.composedPath()[0]:e.target,a=t.contains(n);if(a||!a&&e.target!==i&&s)return}i.setAttribute("aria-expanded",s),ie(t,!s),ne(this.elements.container,this.config.classNames.menu.open,s),s&&H(e)?Ue.focusFirstMenuItem.call(this,null,!0):s||n||le.call(this,i,H(e))},getMenuSize(e){const t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);const i=t.scrollWidth,n=t.scrollHeight;return X(t),{width:i,height:n}},showMenuPanel(e="",t=!1){const i=this.elements.container.querySelector(`#plyr-settings-${this.id}-${e}`);if(!N(i))return;const n=i.parentNode,s=Array.from(n.children).find(e=>!e.hidden);if(ce.transitions&&!ce.reducedMotion){n.style.width=s.scrollWidth+"px",n.style.height=s.scrollHeight+"px";const e=Ue.getMenuSize.call(this,i),t=e=>{e.target===n&&["width","height"].includes(e.propertyName)&&(n.style.width="",n.style.height="",fe.call(this,n,V,t))};pe.call(this,n,V,t),n.style.width=e.width+"px",n.style.height=e.height+"px"}ie(s,!0),ie(i,!1),Ue.focusFirstMenuItem.call(this,i,t)},setDownloadUrl(){const e=this.elements.buttons.download;N(e)&&e.setAttribute("href",this.download)},create(e){const{bindMenuItemShortcuts:t,createButton:i,createProgress:n,createRange:s,createTime:a,setQualityMenu:r,setSpeedMenu:o,showMenuPanel:l}=Ue;this.elements.controls=null,q(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(i.call(this,"play-large"));const u=K("div",te(this.config.selectors.controls.wrapper));this.elements.controls=u;const c={class:"plyr__controls__item"};return _e(q(this.config.controls)?this.config.controls:[]).forEach(r=>{if("restart"===r&&u.appendChild(i.call(this,"restart",c)),"rewind"===r&&u.appendChild(i.call(this,"rewind",c)),"play"===r&&u.appendChild(i.call(this,"play",c)),"fast-forward"===r&&u.appendChild(i.call(this,"fast-forward",c)),"progress"===r){const t=K("div",{class:c.class+" plyr__progress__container"}),i=K("div",te(this.config.selectors.progress));if(i.appendChild(s.call(this,"seek",{id:"plyr-seek-"+e.id})),i.appendChild(n.call(this,"buffer")),this.config.tooltips.seek){const e=K("span",{class:this.config.classNames.tooltip},"00:00");i.appendChild(e),this.elements.display.seekTooltip=e}this.elements.progress=i,t.appendChild(this.elements.progress),u.appendChild(t)}if("current-time"===r&&u.appendChild(a.call(this,"currentTime",c)),"duration"===r&&u.appendChild(a.call(this,"duration",c)),"mute"===r||"volume"===r){let{volume:t}=this.elements;if(N(t)&&u.contains(t)||(t=K("div",J({},c,{class:(c.class+" plyr__volume").trim()})),this.elements.volume=t,u.appendChild(t)),"mute"===r&&t.appendChild(i.call(this,"mute")),"volume"===r&&!W.isIos){const i={max:1,step:.05,value:this.config.volume};t.appendChild(s.call(this,"volume",J(i,{id:"plyr-volume-"+e.id})))}}if("captions"===r&&u.appendChild(i.call(this,"captions",c)),"settings"===r&&!B(this.config.settings)){const n=K("div",J({},c,{class:(c.class+" plyr__menu").trim(),hidden:""}));n.appendChild(i.call(this,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-"+e.id,"aria-expanded":!1}));const s=K("div",{class:"plyr__menu__container",id:"plyr-settings-"+e.id,hidden:""}),a=K("div"),r=K("div",{id:`plyr-settings-${e.id}-home`}),o=K("div",{role:"menu"});r.appendChild(o),a.appendChild(r),this.elements.settings.panels.home=r,this.config.settings.forEach(i=>{const n=K("button",J(te(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));t.call(this,n,i),pe.call(this,n,"click",()=>{l.call(this,i,!1)});const s=K("span",null,qe.get(i,this.config)),r=K("span",{class:this.config.classNames.menu.value});r.innerHTML=e[i],s.appendChild(r),n.appendChild(s),o.appendChild(n);const u=K("div",{id:`plyr-settings-${e.id}-${i}`,hidden:""}),c=K("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});c.appendChild(K("span",{"aria-hidden":!0},qe.get(i,this.config))),c.appendChild(K("span",{class:this.config.classNames.hidden},qe.get("menuBack",this.config))),pe.call(this,u,"keydown",e=>{"ArrowLeft"===e.key&&(e.preventDefault(),e.stopPropagation(),l.call(this,"home",!0))},!1),pe.call(this,c,"click",()=>{l.call(this,"home",!1)}),u.appendChild(c),u.appendChild(K("div",{role:"menu"})),a.appendChild(u),this.elements.settings.buttons[i]=n,this.elements.settings.panels[i]=u}),s.appendChild(a),n.appendChild(s),u.appendChild(n),this.elements.settings.popup=s,this.elements.settings.menu=n}if("pip"===r&&ce.pip&&u.appendChild(i.call(this,"pip",c)),"airplay"===r&&ce.airplay&&u.appendChild(i.call(this,"airplay",c)),"download"===r){const e=J({},c,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(e.download="");const{download:t}=this.config.urls;!U(t)&&this.isEmbed&&J(e,{icon:"logo-"+this.provider,label:this.provider}),u.appendChild(i.call(this,"download",e))}"fullscreen"===r&&u.appendChild(i.call(this,"fullscreen",c))}),this.isHTML5&&r.call(this,Me.getQualityOptions.call(this)),o.call(this),u},inject(){if(this.config.loadSprite){const e=Ue.getIconUrl.call(this);e.cors&&je(e.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let e=null;this.elements.controls=null;const t={id:this.id,seektime:this.config.seekTime,title:this.config.title};let i,n=!0;if(O(this.config.controls)&&(this.config.controls=this.config.controls.call(this,t)),this.config.controls||(this.config.controls=[]),N(this.config.controls)||I(this.config.controls)?e=this.config.controls:(e=Ue.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:$e.getLabel.call(this)}),n=!1),n&&I(this.config.controls)&&(e=(e=>{let i=e;return Object.entries(t).forEach(([e,t])=>{i=De(i,`{${e}}`,t)}),i})(e)),I(this.config.selectors.controls.container)&&(i=document.querySelector(this.config.selectors.controls.container)),N(i)||(i=this.elements.container),i[N(e)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",e),N(this.elements.controls)||Ue.findElements.call(this),!B(this.elements.buttons)){const e=e=>{const t=this.config.classNames.controlPressed;Object.defineProperty(e,"pressed",{enumerable:!0,get:()=>se(e,t),set(i=!1){ne(e,t,i)}})};Object.values(this.elements.buttons).filter(Boolean).forEach(t=>{q(t)||R(t)?Array.from(t).filter(Boolean).forEach(e):e(t)})}if(W.isEdge&&$(i),this.config.tooltips.controls){const{classNames:e,selectors:t}=this.config,i=`${t.controls.wrapper} ${t.labels} .${e.hidden}`,n=re.call(this,i);Array.from(n).forEach(e=>{ne(e,this.config.classNames.hidden,!1),ne(e,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch(e){}},setMarkers(){var e,t;if(!this.duration||this.elements.markers)return;const i=null===(e=this.config.markers)||void 0===e||null===(t=e.points)||void 0===t?void 0:t.filter(({time:e})=>e>0&&e<this.duration);if(null==i||!i.length)return;const n=document.createDocumentFragment(),s=document.createDocumentFragment();let a=null;const r=this.config.classNames.tooltip+"--visible",o=e=>ne(a,r,e);i.forEach(e=>{const t=K("span",{class:this.config.classNames.marker},""),i=e.time/this.duration*100+"%";a&&(t.addEventListener("mouseenter",()=>{e.label||(a.style.left=i,a.innerHTML=e.label,o(!0))}),t.addEventListener("mouseleave",()=>{o(!1)})),t.addEventListener("click",()=>{this.currentTime=e.time}),t.style.left=i,s.appendChild(t)}),n.appendChild(s),this.config.tooltips.seek||(a=K("span",{class:this.config.classNames.tooltip},""),n.appendChild(a)),this.elements.markers={points:s,tip:a},this.elements.progress.appendChild(n)}};function Be(e,t=!0){let i=e;if(t){const e=document.createElement("a");e.href=i,i=e.href}try{return new URL(i)}catch(e){return null}}function Ve(e){const t=new URLSearchParams;return C(e)&&Object.entries(e).forEach(([e,i])=>{t.set(e,i)}),t}const $e={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!ce.textTracks)return void(q(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Ue.setCaptionsMenu.call(this));var e,t;if(N(this.elements.captions)||(this.elements.captions=K("div",te(this.config.selectors.captions)),e=this.elements.captions,t=this.elements.wrapper,N(e)&&N(t)&&t.parentNode.insertBefore(e,t.nextSibling)),W.isIE&&window.URL){const e=this.media.querySelectorAll("track");Array.from(e).forEach(e=>{const t=e.getAttribute("src"),i=Be(t);null!==i&&i.hostname!==window.location.href.hostname&&["http:","https:"].includes(i.protocol)&&Ne(t,"blob").then(t=>{e.setAttribute("src",window.URL.createObjectURL(t))}).catch(()=>{X(e)})})}const i=_e((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(e=>e.split("-")[0]));let n=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===n&&([n]=i);let s=this.storage.get("captions");if(L(s)||({active:s}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:s,language:n,languages:i}),this.isHTML5){const e=this.config.captions.update?"addtrack removetrack":"removetrack";pe.call(this,this.media.textTracks,e,$e.update.bind(this))}setTimeout($e.update.bind(this),0)},update(){const e=$e.getTracks.call(this,!0),{active:t,language:i,meta:n,currentTrackNode:s}=this.captions,a=Boolean(e.find(e=>e.language===i));this.isHTML5&&this.isVideo&&e.filter(e=>!n.get(e)).forEach(e=>{this.debug.log("Track added",e),n.set(e,{default:"showing"===e.mode}),"showing"===e.mode&&(e.mode="hidden"),pe.call(this,e,"cuechange",()=>$e.updateCues.call(this))}),(a&&this.language!==i||!e.includes(s))&&($e.setLanguage.call(this,i),$e.toggle.call(this,t&&a)),this.elements&&ne(this.elements.container,this.config.classNames.captions.enabled,!B(e)),q(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Ue.setCaptionsMenu.call(this)},toggle(e,t=!0){if(!this.supported.ui)return;const{toggled:i}=this.captions,n=this.config.classNames.captions.active,s=M(e)?!i:e;if(s!==i){if(t||(this.captions.active=s,this.storage.set({captions:s})),!this.language&&s&&!t){const e=$e.getTracks.call(this),t=$e.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=t.language,void $e.set.call(this,e.indexOf(t))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=s),ne(this.elements.container,n,s),this.captions.toggled=s,Ue.updateSetting.call(this,"captions"),ge.call(this,this.media,s?"captionsenabled":"captionsdisabled")}setTimeout(()=>{s&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(e,t=!0){const i=$e.getTracks.call(this);if(-1!==e)if(D(e))if(e in i){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;const n=i[e],{language:s}=n||{};this.captions.currentTrackNode=n,Ue.updateSetting.call(this,"captions"),t||(this.captions.language=s,this.storage.set({language:s})),this.isVimeo&&this.embed.enableTextTrack(s),ge.call(this,this.media,"languagechange")}$e.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&$e.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else $e.toggle.call(this,!1,t)},setLanguage(e,t=!0){if(!I(e))return void this.debug.warn("Invalid language argument",e);const i=e.toLowerCase();this.captions.language=i;const n=$e.getTracks.call(this),s=$e.findTrack.call(this,[i]);$e.set.call(this,n.indexOf(s),t)},getTracks(e=!1){return Array.from((this.media||{}).textTracks||[]).filter(t=>!this.isHTML5||e||this.captions.meta.has(t)).filter(e=>["captions","subtitles"].includes(e.kind))},findTrack(e,t=!1){const i=$e.getTracks.call(this),n=e=>Number((this.captions.meta.get(e)||{}).default),s=Array.from(i).sort((e,t)=>n(t)-n(e));let a;return e.every(e=>(a=s.find(t=>t.language===e),!a)),a||(t?s[0]:void 0)},getCurrentTrack(){return $e.getTracks.call(this)[this.currentTrack]},getLabel(e){let t=e;return!F(t)&&ce.textTracks&&this.captions.toggled&&(t=$e.getCurrentTrack.call(this)),F(t)?B(t.label)?B(t.language)?qe.get("enabled",this.config):e.language.toUpperCase():t.label:qe.get("disabled",this.config)},updateCues(e){if(!this.supported.ui)return;if(!N(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!M(e)&&!Array.isArray(e))return void this.debug.warn("updateCues: Invalid input",e);let t=e;if(!t){const e=$e.getCurrentTrack.call(this);t=Array.from((e||{}).activeCues||[]).map(e=>e.getCueAsHTML()).map(Le)}const i=t.map(e=>e.trim()).join("\n");if(i!==this.elements.captions.innerHTML){Z(this.elements.captions);const e=K("span",te(this.config.selectors.caption));e.innerHTML=i,this.elements.captions.appendChild(e),ge.call(this,this.media,"cuechange")}}},We={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.2/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},ze="picture-in-picture",Je={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Ge=()=>{};class Qe{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):Ge}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):Ge}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):Ge}}class Ke{constructor(t){e(this,"onChange",()=>{if(!this.enabled)return;const e=this.player.elements.buttons.fullscreen;N(e)&&(e.pressed=this.active);const t=this.target===this.player.media?this.target:this.player.elements.container;ge.call(this.player,t,this.active?"enterfullscreen":"exitfullscreen",!0)}),e(this,"toggleFallback",(e=!1)=>{if(e?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=e?"hidden":"",ne(this.target,this.player.config.classNames.fullscreen.fallback,e),W.isIos){let t=document.head.querySelector('meta[name="viewport"]');const i="viewport-fit=cover";t||(t=document.createElement("meta"),t.setAttribute("name","viewport"));const n=I(t.content)&&t.content.includes(i);e?(this.cleanupViewport=!n,n||(t.content+=","+i)):this.cleanupViewport&&(t.content=t.content.split(",").filter(e=>e.trim()!==i).join(","))}this.onChange()}),e(this,"trapFocus",e=>{if(W.isIos||!this.active||"Tab"!==e.key)return;const t=document.activeElement,i=re.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[n]=i,s=i[i.length-1];t!==s||e.shiftKey?t===n&&e.shiftKey&&(s.focus(),e.preventDefault()):(n.focus(),e.preventDefault())}),e(this,"update",()=>{if(this.enabled){let e;e=this.forceFallback?"Fallback (forced)":Ke.native?"Native":"Fallback",this.player.debug.log(e+" fullscreen enabled")}else this.player.debug.log("Fullscreen not supported and fallback disabled");ne(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)}),e(this,"enter",()=>{this.enabled&&(W.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!Ke.native||this.forceFallback?this.toggleFallback(!0):this.prefix?B(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),e(this,"exit",()=>{if(this.enabled)if(W.isIos&&this.player.config.fullscreen.iosNative)this.target.webkitExitFullscreen(),be(this.player.play());else if(!Ke.native||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!B(this.prefix)){const e="moz"===this.prefix?"Cancel":"Exit";document[`${this.prefix}${e}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),e(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=t,this.prefix=Ke.prefix,this.property=Ke.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===t.config.fullscreen.fallback,this.player.elements.fullscreen=t.config.fullscreen.container&&function(e,t){const{prototype:i}=Element;return(i.closest||function(){let e=this;do{if(ae.matches(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}).call(e,t)}(this.player.elements.container,t.config.fullscreen.container),pe.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":this.prefix+"fullscreenchange",()=>{this.onChange()}),pe.call(this.player,this.player.elements.container,"dblclick",e=>{N(this.player.elements.controls)&&this.player.elements.controls.contains(e.target)||this.player.listeners.proxy(e,this.toggle,"fullscreen")}),pe.call(this,this.player.elements.container,"keydown",e=>this.trapFocus(e)),this.update()}static get native(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get usingNative(){return Ke.native&&!this.forceFallback}static get prefix(){if(O(document.exitFullscreen))return"";let e="";return["webkit","moz","ms"].some(t=>!(!O(document[t+"ExitFullscreen"])&&!O(document[t+"CancelFullScreen"])||(e=t,0))),e}static get property(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}get enabled(){return(Ke.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}get active(){if(!this.enabled)return!1;if(!Ke.native||this.forceFallback)return se(this.target,this.player.config.classNames.fullscreen.fallback);const e=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}get target(){return W.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen||this.player.elements.container}}function Ye(e,t=1){return new Promise((i,n)=>{const s=new Image,a=()=>{delete s.onload,delete s.onerror,(s.naturalWidth>=t?i:n)(s)};Object.assign(s,{onload:a,onerror:a,src:e})})}const Xe={addStyleHook(){ne(this.elements.container,this.config.selectors.container.replace(".",""),!0),ne(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(e=!1){e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void Xe.toggleNativeControls.call(this,!0);N(this.elements.controls)||(Ue.inject.call(this),this.listeners.controls()),Xe.toggleNativeControls.call(this),this.isHTML5&&$e.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,Ue.updateVolume.call(this),Ue.timeUpdate.call(this),Ue.durationUpdate.call(this),Xe.checkPlaying.call(this),ne(this.elements.container,this.config.classNames.pip.supported,ce.pip&&this.isHTML5&&this.isVideo),ne(this.elements.container,this.config.classNames.airplay.supported,ce.airplay&&this.isHTML5),ne(this.elements.container,this.config.classNames.isIos,W.isIos),ne(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{ge.call(this,this.media,"ready")},0),Xe.setTitle.call(this),this.poster&&Xe.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&Ue.durationUpdate.call(this),this.config.mediaMetadata&&Ue.setMediaMetadata.call(this)},setTitle(){let e=qe.get("play",this.config);if(I(this.config.title)&&!B(this.config.title)&&(e+=", "+this.config.title),Array.from(this.elements.buttons.play||[]).forEach(t=>{t.setAttribute("aria-label",e)}),this.isEmbed){const e=oe.call(this,"iframe");if(!N(e))return;const t=B(this.config.title)?"video":this.config.title,i=qe.get("frameTitle",this.config);e.setAttribute("title",i.replace("{title}",t))}},togglePoster(e){ne(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster(e,t=!0){return t&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),this.elements.poster.removeAttribute("hidden"),ve.call(this).then(()=>Ye(e)).catch(t=>{throw e===this.poster&&Xe.togglePoster.call(this,!1),t}).then(()=>{if(e!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${e}')`,backgroundSize:""}),Xe.togglePoster.call(this,!0),e)))},checkPlaying(e){ne(this.elements.container,this.config.classNames.playing,this.playing),ne(this.elements.container,this.config.classNames.paused,this.paused),ne(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(e=>{Object.assign(e,{pressed:this.playing}),e.setAttribute("aria-label",qe.get(this.playing?"pause":"play",this.config))}),j(e)&&"timeupdate"===e.type||Xe.toggleControls.call(this)},checkLoading(e){this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{ne(this.elements.container,this.config.classNames.loading,this.loading),Xe.toggleControls.call(this)},this.loading?250:0)},toggleControls(e){const{controls:t}=this.elements;if(t&&this.config.hideControls){const i=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||i))}},migrateStyles(){Object.values({...this.media.style}).filter(e=>!B(e)&&I(e)&&e.startsWith("--plyr")).forEach(e=>{this.elements.container.style.setProperty(e,this.media.style.getPropertyValue(e)),this.media.style.removeProperty(e)}),B(this.media.style)&&this.media.removeAttribute("style")}};class Ze{constructor(t){e(this,"firstTouch",()=>{const{player:e}=this,{elements:t}=e;e.touch=!0,ne(t.container,e.config.classNames.isTouch,!0)}),e(this,"setTabFocus",e=>{const{player:t}=this,{elements:i}=t,{key:n,type:s,timeStamp:a}=e;if(clearTimeout(this.focusTimer),"keydown"===s&&"Tab"!==n)return;"keydown"===s&&(this.lastKeyDown=a);const r=a-this.lastKeyDown<=20;("focus"!==s||r)&&((()=>{const e=t.config.classNames.tabFocus;ne(re.call(t,"."+e),e,!1)})(),"focusout"!==s&&(this.focusTimer=setTimeout(()=>{const e=document.activeElement;i.container.contains(e)&&ne(document.activeElement,t.config.classNames.tabFocus,!0)},10)))}),e(this,"global",(e=!0)=>{const{player:t}=this;t.config.keyboard.global&&he.call(t,window,"keydown keyup",this.handleKey,e,!1),he.call(t,document.body,"click",this.toggleMenu,e),me.call(t,document.body,"touchstart",this.firstTouch),he.call(t,document.body,"keydown focus blur focusout",this.setTabFocus,e,!1,!0)}),e(this,"container",()=>{const{player:e}=this,{config:t,elements:i,timers:n}=e;!t.keyboard.global&&t.keyboard.focused&&pe.call(e,i.container,"keydown keyup",this.handleKey,!1),pe.call(e,i.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",t=>{const{controls:s}=i;s&&"enterfullscreen"===t.type&&(s.pressed=!1,s.hover=!1);let a=0;["touchstart","touchmove","mousemove"].includes(t.type)&&(Xe.toggleControls.call(e,!0),a=e.touch?3e3:2e3),clearTimeout(n.controls),n.controls=setTimeout(()=>Xe.toggleControls.call(e,!1),a)});const s=()=>{if(!e.isVimeo||e.config.vimeo.premium)return;const t=i.wrapper,{active:n}=e.fullscreen,[s,a]=Se.call(e),r=Te(`aspect-ratio: ${s} / ${a}`);if(!n)return void(r?(t.style.width=null,t.style.height=null):(t.style.maxWidth=null,t.style.margin=null));const[o,l]=[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)],u=o/l>s/a;r?(t.style.width=u?"auto":"100%",t.style.height=u?"100%":"auto"):(t.style.maxWidth=u?l/a*s+"px":null,t.style.margin=u?"0 auto":null)},a=()=>{clearTimeout(n.resized),n.resized=setTimeout(s,50)};pe.call(e,i.container,"enterfullscreen exitfullscreen",t=>{const{target:n}=e.fullscreen;n===i.container&&(!e.isEmbed&&B(e.config.ratio)||(s(),("enterfullscreen"===t.type?pe:fe).call(e,window,"resize",a)))})}),e(this,"media",()=>{const{player:e}=this,{elements:t}=e;if(pe.call(e,e.media,"timeupdate seeking seeked",t=>Ue.timeUpdate.call(e,t)),pe.call(e,e.media,"durationchange loadeddata loadedmetadata",t=>Ue.durationUpdate.call(e,t)),pe.call(e,e.media,"ended",()=>{e.isHTML5&&e.isVideo&&e.config.resetOnEnd&&(e.restart(),e.pause())}),pe.call(e,e.media,"progress playing seeking seeked",t=>Ue.updateProgress.call(e,t)),pe.call(e,e.media,"volumechange",t=>Ue.updateVolume.call(e,t)),pe.call(e,e.media,"playing play pause ended emptied timeupdate",t=>Xe.checkPlaying.call(e,t)),pe.call(e,e.media,"waiting canplay seeked playing",t=>Xe.checkLoading.call(e,t)),e.supported.ui&&e.config.clickToPlay&&!e.isAudio){const i=oe.call(e,"."+e.config.classNames.video);if(!N(i))return;pe.call(e,t.container,"click",n=>{([t.container,i].includes(n.target)||i.contains(n.target))&&(e.touch&&e.config.hideControls||(e.ended?(this.proxy(n,e.restart,"restart"),this.proxy(n,()=>{be(e.play())},"play")):this.proxy(n,()=>{be(e.togglePlay())},"play")))})}e.supported.ui&&e.config.disableContextMenu&&pe.call(e,t.wrapper,"contextmenu",e=>{e.preventDefault()},!1),pe.call(e,e.media,"volumechange",()=>{e.storage.set({volume:e.volume,muted:e.muted})}),pe.call(e,e.media,"ratechange",()=>{Ue.updateSetting.call(e,"speed"),e.storage.set({speed:e.speed})}),pe.call(e,e.media,"qualitychange",t=>{Ue.updateSetting.call(e,"quality",null,t.detail.quality)}),pe.call(e,e.media,"ready qualitychange",()=>{Ue.setDownloadUrl.call(e)});const i=e.config.events.concat(["keyup","keydown"]).join(" ");pe.call(e,e.media,i,i=>{let{detail:n={}}=i;"error"===i.type&&(n=e.media.error),ge.call(e,t.container,i.type,!0,n)})}),e(this,"proxy",(e,t,i)=>{const{player:n}=this,s=n.config.listeners[i];let a=!0;O(s)&&(a=s.call(n,e)),!1!==a&&O(t)&&t.call(n,e)}),e(this,"bind",(e,t,i,n,s=!0)=>{const{player:a}=this,r=a.config.listeners[n],o=O(r);pe.call(a,e,t,e=>this.proxy(e,i,n),s&&!o)}),e(this,"controls",()=>{const{player:e}=this,{elements:t}=e,i=W.isIE?"change":"input";if(t.buttons.play&&Array.from(t.buttons.play).forEach(t=>{this.bind(t,"click",()=>{be(e.togglePlay())},"play")}),this.bind(t.buttons.restart,"click",e.restart,"restart"),this.bind(t.buttons.rewind,"click",()=>{e.lastSeekTime=Date.now(),e.rewind()},"rewind"),this.bind(t.buttons.fastForward,"click",()=>{e.lastSeekTime=Date.now(),e.forward()},"fastForward"),this.bind(t.buttons.mute,"click",()=>{e.muted=!e.muted},"mute"),this.bind(t.buttons.captions,"click",()=>e.toggleCaptions()),this.bind(t.buttons.download,"click",()=>{ge.call(e,e.media,"download")},"download"),this.bind(t.buttons.fullscreen,"click",()=>{e.fullscreen.toggle()},"fullscreen"),this.bind(t.buttons.pip,"click",()=>{e.pip="toggle"},"pip"),this.bind(t.buttons.airplay,"click",e.airplay,"airplay"),this.bind(t.buttons.settings,"click",t=>{t.stopPropagation(),t.preventDefault(),Ue.toggleMenu.call(e,t)},null,!1),this.bind(t.buttons.settings,"keyup",t=>{["Space","Enter"].includes(t.key)&&("Enter"!==t.key?(t.preventDefault(),t.stopPropagation(),Ue.toggleMenu.call(e,t)):Ue.focusFirstMenuItem.call(e,null,!0))},null,!1),this.bind(t.settings.menu,"keydown",t=>{"Escape"===t.key&&Ue.toggleMenu.call(e,t)}),this.bind(t.inputs.seek,"mousedown mousemove",e=>{const i=t.progress.getBoundingClientRect(),n=100/i.width*(e.pageX-i.left);e.currentTarget.setAttribute("seek-value",n)}),this.bind(t.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",t=>{const i=t.currentTarget,n="play-on-seeked";if(H(t)&&!["ArrowLeft","ArrowRight"].includes(t.key))return;e.lastSeekTime=Date.now();const s=i.hasAttribute(n),a=["mouseup","touchend","keyup"].includes(t.type);s&&a?(i.removeAttribute(n),be(e.play())):!a&&e.playing&&(i.setAttribute(n,""),e.pause())}),W.isIos){const t=re.call(e,'input[type="range"]');Array.from(t).forEach(e=>this.bind(e,i,e=>$(e.target)))}this.bind(t.inputs.seek,i,t=>{const i=t.currentTarget;let n=i.getAttribute("seek-value");B(n)&&(n=i.value),i.removeAttribute("seek-value"),e.currentTime=n/i.max*e.duration},"seek"),this.bind(t.progress,"mouseenter mouseleave mousemove",t=>Ue.updateSeekTooltip.call(e,t)),this.bind(t.progress,"mousemove touchmove",t=>{const{previewThumbnails:i}=e;i&&i.loaded&&i.startMove(t)}),this.bind(t.progress,"mouseleave touchend click",()=>{const{previewThumbnails:t}=e;t&&t.loaded&&t.endMove(!1,!0)}),this.bind(t.progress,"mousedown touchstart",t=>{const{previewThumbnails:i}=e;i&&i.loaded&&i.startScrubbing(t)}),this.bind(t.progress,"mouseup touchend",t=>{const{previewThumbnails:i}=e;i&&i.loaded&&i.endScrubbing(t)}),W.isWebkit&&Array.from(re.call(e,'input[type="range"]')).forEach(t=>{this.bind(t,"input",t=>Ue.updateRangeFill.call(e,t.target))}),e.config.toggleInvert&&!N(t.display.duration)&&this.bind(t.display.currentTime,"click",()=>{0!==e.currentTime&&(e.config.invertTime=!e.config.invertTime,Ue.timeUpdate.call(e))}),this.bind(t.inputs.volume,i,t=>{e.volume=t.target.value},"volume"),this.bind(t.controls,"mouseenter mouseleave",i=>{t.controls.hover=!e.touch&&"mouseenter"===i.type}),t.fullscreen&&Array.from(t.fullscreen.children).filter(e=>!e.contains(t.container)).forEach(i=>{this.bind(i,"mouseenter mouseleave",i=>{t.controls&&(t.controls.hover=!e.touch&&"mouseenter"===i.type)})}),this.bind(t.controls,"mousedown mouseup touchstart touchend touchcancel",e=>{t.controls.pressed=["mousedown","touchstart"].includes(e.type)}),this.bind(t.controls,"focusin",()=>{const{config:i,timers:n}=e;ne(t.controls,i.classNames.noTransition,!0),Xe.toggleControls.call(e,!0),setTimeout(()=>{ne(t.controls,i.classNames.noTransition,!1)},0);const s=this.touch?3e3:4e3;clearTimeout(n.controls),n.controls=setTimeout(()=>Xe.toggleControls.call(e,!1),s)}),this.bind(t.inputs.volume,"wheel",t=>{const i=t.webkitDirectionInvertedFromDevice,[n,s]=[t.deltaX,-t.deltaY].map(e=>i?-e:e),a=Math.sign(Math.abs(n)>Math.abs(s)?n:s);e.increaseVolume(a/50);const{volume:r}=e.media;(1===a&&r<1||-1===a&&r>0)&&t.preventDefault()},"volume",!1)}),this.player=t,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){const{player:t}=this,{elements:i}=t,{key:n,type:s,altKey:a,ctrlKey:r,metaKey:o,shiftKey:l}=e,u="keydown"===s,c=u&&n===this.lastKey;var d;if(!(a||r||o||l)&&n)if(u){const s=document.activeElement;if(N(s)){const{editable:n}=t.config.selectors,{seek:a}=i.inputs;if(s!==a&&ae(s,n))return;if("Space"===e.key&&ae(s,'button, [role^="menuitem"]'))return}switch(["Space","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(n)&&(e.preventDefault(),e.stopPropagation()),n){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c||(d=parseInt(n,10),t.currentTime=t.duration/10*d);break;case"Space":case"k":c||be(t.togglePlay());break;case"ArrowUp":t.increaseVolume(.1);break;case"ArrowDown":t.decreaseVolume(.1);break;case"m":c||(t.muted=!t.muted);break;case"ArrowRight":t.forward();break;case"ArrowLeft":t.rewind();break;case"f":t.fullscreen.toggle();break;case"c":c||t.toggleCaptions();break;case"l":t.loop=!t.loop}"Escape"===n&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=n}else this.lastKey=null}toggleMenu(e){Ue.toggleMenu.call(this.player,e)}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var et=function(e,t){return function(e,t){e.exports=function(){var e=function(){},t={},i={},n={};function s(e,t){if(e){var s=n[e];if(i[e]=t,s)for(;s.length;)s[0](e,t),s.splice(0,1)}}function a(t,i){t.call&&(t={success:t}),i.length?(t.error||e)(i):(t.success||e)(t)}function r(t,i,n,s){var a,o,l=document,u=n.async,c=(n.numRetries||0)+1,d=n.before||e,h=t.replace(/[\?|#].*$/,""),p=t.replace(/^(css|img)!/,"");s=s||0,/(^css!|\.css$)/.test(h)?((o=l.createElement("link")).rel="stylesheet",o.href=p,(a="hideFocus"in o)&&o.relList&&(a=0,o.rel="preload",o.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(h)?(o=l.createElement("img")).src=p:((o=l.createElement("script")).src=t,o.async=void 0===u||u),o.onload=o.onerror=o.onbeforeload=function(e){var l=e.type[0];if(a)try{o.sheet.cssText.length||(l="e")}catch(e){18!=e.code&&(l="e")}if("e"==l){if((s+=1)<c)return r(t,i,n,s)}else if("preload"==o.rel&&"style"==o.as)return o.rel="stylesheet";i(t,l,e.defaultPrevented)},!1!==d(t,o)&&l.head.appendChild(o)}function o(e,t,i){var n,s,a=(e=e.push?e:[e]).length,o=a,l=[];for(n=function(e,i,n){if("e"==i&&l.push(e),"b"==i){if(!n)return;l.push(e)}--a||t(l)},s=0;s<o;s++)r(e[s],n,i)}function l(e,i,n){var r,l;if(i&&i.trim&&(r=i),l=(r?n:i)||{},r){if(r in t)throw"LoadJS";t[r]=!0}function u(t,i){o(e,(function(e){a(l,e),t&&a({success:t,error:i},e),s(r,e)}),l)}if(l.returnPromise)return new Promise(u);u()}return l.ready=function(e,t){return function(e,t){e=e.push?e:[e];var s,a,r,o=[],l=e.length,u=l;for(s=function(e,i){i.length&&o.push(e),--u||t(o)};l--;)a=e[l],(r=i[a])?s(a,r):(n[a]=n[a]||[]).push(s)}(e,(function(e){a(t,e)})),l},l.done=function(e){s(e,[])},l.reset=function(){t={},i={},n={}},l.isDefined=function(e){return e in t},l}()}(t={exports:{}}),t.exports}();function tt(e){return new Promise((t,i)=>{et(e,{success:t,error:i})})}function it(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,ge.call(this,this.media,e?"play":"pause"))}const nt={setup(){const e=this;ne(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,Pe.call(e),C(window.Vimeo)?nt.ready.call(e):tt(e.config.urls.vimeo.sdk).then(()=>{nt.ready.call(e)}).catch(t=>{e.debug.warn("Vimeo SDK (player.js) failed to load",t)})},ready(){const e=this,t=e.config.vimeo,{premium:i,referrerPolicy:n,...s}=t;let a=e.media.getAttribute("src"),r="";B(a)?(a=e.media.getAttribute(e.config.attributes.embed.id),r=e.media.getAttribute(e.config.attributes.embed.hash)):r=function(e){const t=e.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return t&&5===t.length?t[4]:null}(a);const o=r?{h:r}:{};i&&Object.assign(s,{controls:!1,sidedock:!1});const l=Ve({loop:e.config.loop.active,autoplay:e.autoplay,muted:e.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative,...o,...s}),u=B(c=a)?null:D(Number(c))?c:c.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:c;var c;const d=K("iframe"),h=Ce(e.config.urls.vimeo.iframe,u,l);if(d.setAttribute("src",h),d.setAttribute("allowfullscreen",""),d.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),B(n)||d.setAttribute("referrerPolicy",n),i||!t.customControls)d.setAttribute("data-poster",e.poster),e.media=ee(d,e.media);else{const t=K("div",{class:e.config.classNames.embedContainer,"data-poster":e.poster});t.appendChild(d),e.media=ee(t,e.media)}t.customControls||Ne(Ce(e.config.urls.vimeo.api,h)).then(t=>{!B(t)&&t.thumbnail_url&&Xe.setPoster.call(e,t.thumbnail_url).catch(()=>{})}),e.embed=new window.Vimeo.Player(d,{autopause:e.config.autopause,muted:e.muted}),e.media.paused=!0,e.media.currentTime=0,e.supported.ui&&e.embed.disableTextTrack(),e.media.play=()=>(it.call(e,!0),e.embed.play()),e.media.pause=()=>(it.call(e,!1),e.embed.pause()),e.media.stop=()=>{e.pause(),e.currentTime=0};let{currentTime:p}=e.media;Object.defineProperty(e.media,"currentTime",{get:()=>p,set(t){const{embed:i,media:n,paused:s,volume:a}=e,r=s&&!i.hasPlayed;n.seeking=!0,ge.call(e,n,"seeking"),Promise.resolve(r&&i.setVolume(0)).then(()=>i.setCurrentTime(t)).then(()=>r&&i.pause()).then(()=>r&&i.setVolume(a)).catch(()=>{})}});let f=e.config.speed.selected;Object.defineProperty(e.media,"playbackRate",{get:()=>f,set(t){e.embed.setPlaybackRate(t).then(()=>{f=t,ge.call(e,e.media,"ratechange")}).catch(()=>{e.options.speed=[1]})}});let{volume:m}=e.config;Object.defineProperty(e.media,"volume",{get:()=>m,set(t){e.embed.setVolume(t).then(()=>{m=t,ge.call(e,e.media,"volumechange")})}});let{muted:g}=e.config;Object.defineProperty(e.media,"muted",{get:()=>g,set(t){const i=!!L(t)&&t;e.embed.setVolume(i?0:e.config.volume).then(()=>{g=i,ge.call(e,e.media,"volumechange")})}});let y,{loop:v}=e.config;Object.defineProperty(e.media,"loop",{get:()=>v,set(t){const i=L(t)?t:e.config.loop.active;e.embed.setLoop(i).then(()=>{v=i})}}),e.embed.getVideoUrl().then(t=>{y=t,Ue.setDownloadUrl.call(e)}).catch(e=>{this.debug.warn(e)}),Object.defineProperty(e.media,"currentSrc",{get:()=>y}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration}),Promise.all([e.embed.getVideoWidth(),e.embed.getVideoHeight()]).then(t=>{const[i,n]=t;e.embed.ratio=Ae(i,n),Pe.call(this)}),e.embed.setAutopause(e.config.autopause).then(t=>{e.config.autopause=t}),e.embed.getVideoTitle().then(t=>{e.config.title=t,Xe.setTitle.call(this)}),e.embed.getCurrentTime().then(t=>{p=t,ge.call(e,e.media,"timeupdate")}),e.embed.getDuration().then(t=>{e.media.duration=t,ge.call(e,e.media,"durationchange")}),e.embed.getTextTracks().then(t=>{e.media.textTracks=t,$e.setup.call(e)}),e.embed.on("cuechange",({cues:t=[]})=>{const i=t.map(e=>function(e){const t=document.createDocumentFragment(),i=document.createElement("div");return t.appendChild(i),i.innerHTML=e,t.firstChild.innerText}(e.text));$e.updateCues.call(e,i)}),e.embed.on("loaded",()=>{e.embed.getPaused().then(t=>{it.call(e,!t),t||ge.call(e,e.media,"playing")}),N(e.embed.element)&&e.supported.ui&&e.embed.element.setAttribute("tabindex",-1)}),e.embed.on("bufferstart",()=>{ge.call(e,e.media,"waiting")}),e.embed.on("bufferend",()=>{ge.call(e,e.media,"playing")}),e.embed.on("play",()=>{it.call(e,!0),ge.call(e,e.media,"playing")}),e.embed.on("pause",()=>{it.call(e,!1)}),e.embed.on("timeupdate",t=>{e.media.seeking=!1,p=t.seconds,ge.call(e,e.media,"timeupdate")}),e.embed.on("progress",t=>{e.media.buffered=t.percent,ge.call(e,e.media,"progress"),1===parseInt(t.percent,10)&&ge.call(e,e.media,"canplaythrough"),e.embed.getDuration().then(t=>{t!==e.media.duration&&(e.media.duration=t,ge.call(e,e.media,"durationchange"))})}),e.embed.on("seeked",()=>{e.media.seeking=!1,ge.call(e,e.media,"seeked")}),e.embed.on("ended",()=>{e.media.paused=!0,ge.call(e,e.media,"ended")}),e.embed.on("error",t=>{e.media.error=t,ge.call(e,e.media,"error")}),t.customControls&&setTimeout(()=>Xe.build.call(e),0)}};function st(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,ge.call(this,this.media,e?"play":"pause"))}function at(e){return e.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}const rt={setup(){if(ne(this.elements.wrapper,this.config.classNames.embed,!0),C(window.YT)&&O(window.YT.Player))rt.ready.call(this);else{const e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{O(e)&&e(),rt.ready.call(this)},tt(this.config.urls.youtube.sdk).catch(e=>{this.debug.warn("YouTube API failed to load",e)})}},getTitle(e){Ne(Ce(this.config.urls.youtube.api,e)).then(e=>{if(C(e)){const{title:t,height:i,width:n}=e;this.config.title=t,Xe.setTitle.call(this),this.embed.ratio=Ae(n,i)}Pe.call(this)}).catch(()=>{Pe.call(this)})},ready(){const e=this,t=e.config.youtube,i=e.media&&e.media.getAttribute("id");if(!B(i)&&i.startsWith("youtube-"))return;let n=e.media.getAttribute("src");B(n)&&(n=e.media.getAttribute(this.config.attributes.embed.id));const s=B(a=n)?null:a.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:a;var a;const r=K("div",{id:`${e.provider}-${Math.floor(1e4*Math.random())}`,"data-poster":t.customControls?e.poster:void 0});if(e.media=ee(r,e.media),t.customControls){const t=e=>`https://i.ytimg.com/vi/${s}/${e}default.jpg`;Ye(t("maxres"),121).catch(()=>Ye(t("sd"),121)).catch(()=>Ye(t("hq"))).then(t=>Xe.setPoster.call(e,t.src)).then(t=>{t.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}e.embed=new window.YT.Player(e.media,{videoId:s,host:at(t),playerVars:J({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui&&t.customControls?0:1,disablekb:1,playsinline:e.config.fullscreen.iosNative?0:1,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},t),events:{onError(t){if(!e.media.error){const i=t.data,n={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[i]||"An unknown error occured";e.media.error={code:i,message:n},ge.call(e,e.media,"error")}},onPlaybackRateChange(t){const i=t.target;e.media.playbackRate=i.getPlaybackRate(),ge.call(e,e.media,"ratechange")},onReady(i){if(O(e.media.play))return;const n=i.target;rt.getTitle.call(e,s),e.media.play=()=>{st.call(e,!0),n.playVideo()},e.media.pause=()=>{st.call(e,!1),n.pauseVideo()},e.media.stop=()=>{n.stopVideo()},e.media.duration=n.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:()=>Number(n.getCurrentTime()),set(t){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,ge.call(e,e.media,"seeking"),n.seekTo(t)}}),Object.defineProperty(e.media,"playbackRate",{get:()=>n.getPlaybackRate(),set(e){n.setPlaybackRate(e)}});let{volume:a}=e.config;Object.defineProperty(e.media,"volume",{get:()=>a,set(t){a=t,n.setVolume(100*a),ge.call(e,e.media,"volumechange")}});let{muted:r}=e.config;Object.defineProperty(e.media,"muted",{get:()=>r,set(t){const i=L(t)?t:r;r=i,n[i?"mute":"unMute"](),n.setVolume(100*a),ge.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:()=>n.getVideoUrl()}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration});const o=n.getAvailablePlaybackRates();e.options.speed=o.filter(t=>e.config.speed.options.includes(t)),e.supported.ui&&t.customControls&&e.media.setAttribute("tabindex",-1),ge.call(e,e.media,"timeupdate"),ge.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval(()=>{e.media.buffered=n.getVideoLoadedFraction(),(null===e.media.lastBuffered||e.media.lastBuffered<e.media.buffered)&&ge.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,1===e.media.buffered&&(clearInterval(e.timers.buffering),ge.call(e,e.media,"canplaythrough"))},200),t.customControls&&setTimeout(()=>Xe.build.call(e),50)},onStateChange(i){const n=i.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(i.data)&&(e.media.seeking=!1,ge.call(e,e.media,"seeked")),i.data){case-1:ge.call(e,e.media,"timeupdate"),e.media.buffered=n.getVideoLoadedFraction(),ge.call(e,e.media,"progress");break;case 0:st.call(e,!1),e.media.loop?(n.stopVideo(),n.playVideo()):ge.call(e,e.media,"ended");break;case 1:t.customControls&&!e.config.autoplay&&e.media.paused&&!e.embed.hasPlayed?e.media.pause():(st.call(e,!0),ge.call(e,e.media,"playing"),e.timers.playing=setInterval(()=>{ge.call(e,e.media,"timeupdate")},50),e.media.duration!==n.getDuration()&&(e.media.duration=n.getDuration(),ge.call(e,e.media,"durationchange")));break;case 2:e.muted||e.embed.unMute(),st.call(e,!1);break;case 3:ge.call(e,e.media,"waiting")}ge.call(e,e.elements.container,"statechange",!1,{code:i.data})}}})}},ot={setup(){this.media?(ne(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),ne(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&ne(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=K("div",{class:this.config.classNames.video}),G(this.media,this.elements.wrapper),this.elements.poster=K("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?Me.setup.call(this):this.isYouTube?rt.setup.call(this):this.isVimeo&&nt.setup.call(this)):this.debug.warn("No media element found!")}};class lt{constructor(t){e(this,"load",()=>{this.enabled&&(C(window.google)&&C(window.google.ima)?this.ready():tt(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),e(this,"ready",()=>{var e;this.enabled||((e=this).manager&&e.manager.destroy(),e.elements.displayContainer&&e.elements.displayContainer.destroy(),e.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),e(this,"setupIMA",()=>{this.elements.container=K("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,e=>this.onAdsManagerLoaded(e),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,e=>this.onAdError(e),!1),this.requestAds()}),e(this,"requestAds",()=>{const{container:e}=this.player.elements;try{const t=new google.ima.AdsRequest;t.adTagUrl=this.tagUrl,t.linearAdSlotWidth=e.offsetWidth,t.linearAdSlotHeight=e.offsetHeight,t.nonLinearAdSlotWidth=e.offsetWidth,t.nonLinearAdSlotHeight=e.offsetHeight,t.forceNonLinearFullSlot=!1,t.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(t)}catch(e){this.onAdError(e)}}),e(this,"pollCountdown",(e=!1)=>{if(!e)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const e=Fe(Math.max(this.manager.getRemainingTime(),0)),t=`${qe.get("advertisement",this.player.config)} - ${e}`;this.elements.container.setAttribute("data-badge-text",t)},100)}),e(this,"onAdsManagerLoaded",e=>{if(!this.enabled)return;const t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,t.enablePreloading=!0,this.manager=e.getAdsManager(this.player,t),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,e=>this.onAdError(e)),Object.keys(google.ima.AdEvent.Type).forEach(e=>{this.manager.addEventListener(google.ima.AdEvent.Type[e],e=>this.onAdEvent(e))}),this.trigger("loaded")}),e(this,"addCuePoints",()=>{B(this.cuePoints)||this.cuePoints.forEach(e=>{if(0!==e&&-1!==e&&e<this.player.duration){const t=this.player.elements.progress;if(N(t)){const i=100/this.player.duration*e,n=K("span",{class:this.player.config.classNames.cues});n.style.left=i.toString()+"%",t.appendChild(n)}}})}),e(this,"onAdEvent",e=>{const{container:t}=this.player.elements,i=e.getAd(),n=e.getAdData();switch((e=>{ge.call(this.player,this.player.media,"ads"+e.replace(/_/g,"").toLowerCase())})(e.type),e.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),i.isLinear()||(i.width=t.offsetWidth,i.height=t.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:n.adError&&this.player.debug.warn("Non-fatal ad error: "+n.adError.getMessage())}}),e(this,"onAdError",e=>{this.cancel(),this.player.debug.warn("Ads error",e)}),e(this,"listeners",()=>{const{container:e}=this.player.elements;let t;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{t=this.player.currentTime}),this.player.on("seeked",()=>{const e=this.player.currentTime;B(this.cuePoints)||this.cuePoints.forEach((i,n)=>{t<i&&i<e&&(this.manager.discardAdBreak(),this.cuePoints.splice(n,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL)})}),e(this,"play",()=>{const{container:e}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(e){this.onAdError(e)}}).catch(()=>{})}),e(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,be(this.player.media.play())}),e(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),e(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),e(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(e=>{this.on("loaded",e),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),e(this,"trigger",(e,...t)=>{const i=this.events[e];q(i)&&i.forEach(e=>{O(e)&&e.apply(this,t)})}),e(this,"on",(e,t)=>(q(this.events[e])||(this.events[e]=[]),this.events[e].push(t),this)),e(this,"startSafetyTimer",(e,t)=>{this.player.debug.log("Safety timer invoked from: "+t),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},e)}),e(this,"clearSafetyTimer",e=>{M(this.safetyTimer)||(this.player.debug.log("Safety timer cleared from: "+e),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=t,this.config=t.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((e,t)=>{this.on("loaded",e),this.on("error",t)}),this.load()}get enabled(){const{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!B(e.publisherId)||U(e.tagUrl))}get tagUrl(){const{config:e}=this;return U(e.tagUrl)?e.tagUrl:"https://go.aniview.com/api/adserver6/vast/?"+Ve({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId})}}function ut(e=0,t=0,i=255){return Math.min(Math.max(e,t),i)}const ct=e=>{const t=[];return e.split(/\r\n\r\n|\n\n|\r\r/).forEach(e=>{const i={};e.split(/\r\n|\n|\r/).forEach(e=>{if(D(i.startTime)){if(!B(e.trim())&&B(i.text)){const t=e.trim().split("#xywh=");[i.text]=t,t[1]&&([i.x,i.y,i.w,i.h]=t[1].split(","))}}else{const t=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);t&&(i.startTime=60*Number(t[1]||0)*60+60*Number(t[2])+Number(t[3])+Number("0."+t[4]),i.endTime=60*Number(t[6]||0)*60+60*Number(t[7])+Number(t[8])+Number("0."+t[9]))}}),i.text&&t.push(i)}),t},dt=(e,t)=>{const i={};return e>t.width/t.height?(i.width=t.width,i.height=1/e*t.width):(i.height=t.height,i.width=e*t.height),i};class ht{constructor(t){e(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.loaded=!0)})}),e(this,"getThumbnails",()=>new Promise(e=>{const{src:t}=this.player.config.previewThumbnails;if(B(t))throw new Error("Missing previewThumbnails.src config attribute");const i=()=>{this.thumbnails.sort((e,t)=>e.height-t.height),this.player.debug.log("Preview thumbnails",this.thumbnails),e()};if(O(t))t(e=>{this.thumbnails=e,i()});else{const e=(I(t)?[t]:t).map(e=>this.getThumbnail(e));Promise.all(e).then(i)}})),e(this,"getThumbnail",e=>new Promise(t=>{Ne(e).then(i=>{const n={frames:ct(i),height:null,urlPrefix:""};n.frames[0].text.startsWith("/")||n.frames[0].text.startsWith("http://")||n.frames[0].text.startsWith("https://")||(n.urlPrefix=e.substring(0,e.lastIndexOf("/")+1));const s=new Image;s.onload=()=>{n.height=s.naturalHeight,n.width=s.naturalWidth,this.thumbnails.push(n),t()},s.src=n.urlPrefix+n.frames[0].text})})),e(this,"startMove",e=>{if(this.loaded&&j(e)&&["touchmove","mousemove"].includes(e.type)&&this.player.media.duration){if("touchmove"===e.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var t,i;const n=this.player.elements.progress.getBoundingClientRect(),s=100/n.width*(e.pageX-n.left);this.seekTime=this.player.media.duration*(s/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=e.pageX,this.elements.thumb.time.innerText=Fe(this.seekTime);const a=null===(t=this.player.config.markers)||void 0===t||null===(i=t.points)||void 0===i?void 0:i.find(({time:e})=>e===Math.round(this.seekTime));a&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",a.label+"<br>")}this.showImageAtCurrentTime()}}),e(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),e(this,"startScrubbing",e=>{(M(e.button)||!1===e.button||0===e.button)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),e(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):me.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),e(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),e(this,"render",()=>{this.elements.thumb.container=K("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=K("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const e=K("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=K("span",{},"00:00"),e.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(e),N(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=K("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),e(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),e(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const e=this.thumbnails[0].frames.findIndex(e=>this.seekTime>=e.startTime&&this.seekTime<=e.endTime),t=e>=0;let i=0;this.mouseDown||this.toggleThumbContainer(t),t&&(this.thumbnails.forEach((t,n)=>{this.loadedImages.includes(t.frames[e].text)&&(i=n)}),e!==this.showingThumb&&(this.showingThumb=e,this.loadImage(i)))}),e(this,"loadImage",(e=0)=>{const t=this.showingThumb,i=this.thumbnails[e],{urlPrefix:n}=i,s=i.frames[t],a=i.frames[t].text,r=n+a;if(this.currentImageElement&&this.currentImageElement.dataset.filename===a)this.showImage(this.currentImageElement,s,e,t,a,!1),this.currentImageElement.dataset.index=t,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const i=new Image;i.src=r,i.dataset.index=t,i.dataset.filename=a,this.showingThumbFilename=a,this.player.debug.log("Loading image: "+r),i.onload=()=>this.showImage(i,s,e,t,a,!0),this.loadingImage=i,this.removeOldImages(i)}}),e(this,"showImage",(e,t,i,n,s,a=!0)=>{this.player.debug.log(`Showing thumb: ${s}. num: ${n}. qual: ${i}. newimg: ${a}`),this.setImageSizeAndOffset(e,t),a&&(this.currentImageContainer.appendChild(e),this.currentImageElement=e,this.loadedImages.includes(s)||this.loadedImages.push(s)),this.preloadNearby(n,!0).then(this.preloadNearby(n,!1)).then(this.getHigherQuality(i,e,t,s))}),e(this,"removeOldImages",e=>{Array.from(this.currentImageContainer.children).forEach(t=>{if("img"!==t.tagName.toLowerCase())return;const i=this.usingSprites?500:1e3;if(t.dataset.index!==e.dataset.index&&!t.dataset.deleting){t.dataset.deleting=!0;const{currentImageContainer:e}=this;setTimeout(()=>{e.removeChild(t),this.player.debug.log("Removing thumb: "+t.dataset.filename)},i)}})}),e(this,"preloadNearby",(e,t=!0)=>new Promise(i=>{setTimeout(()=>{const n=this.thumbnails[0].frames[e].text;if(this.showingThumbFilename===n){let s;s=t?this.thumbnails[0].frames.slice(e):this.thumbnails[0].frames.slice(0,e).reverse();let a=!1;s.forEach(e=>{const t=e.text;if(t!==n&&!this.loadedImages.includes(t)){a=!0,this.player.debug.log("Preloading thumb filename: "+t);const{urlPrefix:e}=this.thumbnails[0],n=e+t,s=new Image;s.src=n,s.onload=()=>{this.player.debug.log("Preloaded thumb filename: "+t),this.loadedImages.includes(t)||this.loadedImages.push(t),i()}}}),a||i()}},300)})),e(this,"getHigherQuality",(e,t,i,n)=>{if(e<this.thumbnails.length-1){let s=t.naturalHeight;this.usingSprites&&(s=i.h),s<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===n&&(this.player.debug.log("Showing higher quality thumb for: "+n),this.loadImage(e+1))},300)}}),e(this,"toggleThumbContainer",(e=!1,t=!1)=>{const i=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(i,e),!e&&t&&(this.showingThumb=null,this.showingThumbFilename=null)}),e(this,"toggleScrubbingContainer",(e=!1)=>{const t=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(t,e),e||(this.showingThumb=null,this.showingThumbFilename=null)}),e(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),e(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:e}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(e.clientHeight>20&&e.clientWidth<20){const t=Math.floor(e.clientHeight*this.thumbAspectRatio);e.style.width=t+"px"}else if(e.clientHeight<20&&e.clientWidth>20){const t=Math.floor(e.clientWidth/this.thumbAspectRatio);e.style.height=t+"px"}}else{const t=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);e.style.height=this.thumbContainerHeight+"px",e.style.width=t+"px"}this.setThumbContainerPos()}),e(this,"setThumbContainerPos",()=>{const e=this.player.elements.progress.getBoundingClientRect(),t=this.player.elements.container.getBoundingClientRect(),{container:i}=this.elements.thumb,n=t.left-e.left+10,s=t.right-e.left-i.clientWidth-10,a=this.mousePosX-e.left-i.clientWidth/2,r=ut(a,n,s);i.style.left=r+"px",i.style.setProperty("--preview-arrow-offset",a-r+"px")}),e(this,"setScrubbingContainerSize",()=>{const{width:e,height:t}=dt(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=e+"px",this.elements.scrubbing.container.style.height=t+"px"}),e(this,"setImageSizeAndOffset",(e,t)=>{if(!this.usingSprites)return;const i=this.thumbContainerHeight/t.h;e.style.height=e.naturalHeight*i+"px",e.style.width=e.naturalWidth*i+"px",e.style.left=`-${t.x*i}px`,e.style.top=`-${t.y*i}px`}),this.player=t,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:e}=dt(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return e}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}const pt={insertElements(e,t){I(t)?Y(e,this.media,{src:t}):q(t)&&t.forEach(t=>{Y(e,this.media,t)})},change(e){z(e,"sources.length")?(Me.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],X(this.media),this.media=null,N(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:t,type:i}=e,[{provider:n=Je.html5,src:s}]=t,a="html5"===n?i:"div",r="html5"===n?{}:{src:s};Object.assign(this,{provider:n,type:i,supported:ce.check(i,n,this.config.playsinline),media:K(a,r)}),this.elements.container.appendChild(this.media),L(e.autoplay)&&(this.config.autoplay=e.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),B(e.poster)||(this.poster=e.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),Xe.addStyleHook.call(this),this.isHTML5&&pt.insertElements.call(this,"source",t),this.config.title=e.title,ot.setup.call(this),this.isHTML5&&Object.keys(e).includes("tracks")&&pt.insertElements.call(this,"track",e.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Xe.build.call(this),this.isHTML5&&this.media.load(),B(e.previewThumbnails)||(Object.assign(this.config.previewThumbnails,e.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new ht(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class ft{constructor(t,i){if(e(this,"play",()=>O(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>be(this.media.play())),this.media.play()):null),e(this,"pause",()=>this.playing&&O(this.media.pause)?this.media.pause():null),e(this,"togglePlay",e=>(L(e)?e:!this.playing)?this.play():this.pause()),e(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):O(this.media.stop)&&this.media.stop()}),e(this,"restart",()=>{this.currentTime=0}),e(this,"rewind",e=>{this.currentTime-=D(e)?e:this.config.seekTime}),e(this,"forward",e=>{this.currentTime+=D(e)?e:this.config.seekTime}),e(this,"increaseVolume",e=>{const t=this.media.muted?0:this.volume;this.volume=t+(D(e)?e:0)}),e(this,"decreaseVolume",e=>{this.increaseVolume(-e)}),e(this,"airplay",()=>{ce.airplay&&this.media.webkitShowPlaybackTargetPicker()}),e(this,"toggleControls",e=>{if(this.supported.ui&&!this.isAudio){const t=se(this.elements.container,this.config.classNames.hideControls),i=void 0===e?void 0:!e,n=ne(this.elements.container,this.config.classNames.hideControls,i);if(n&&q(this.config.controls)&&this.config.controls.includes("settings")&&!B(this.config.settings)&&Ue.toggleMenu.call(this,!1),n!==t){const e=n?"controlshidden":"controlsshown";ge.call(this,this.media,e)}return!n}return!1}),e(this,"on",(e,t)=>{pe.call(this,this.elements.container,e,t)}),e(this,"once",(e,t)=>{me.call(this,this.elements.container,e,t)}),e(this,"off",(e,t)=>{fe(this.elements.container,e,t)}),e(this,"destroy",(e,t=!1)=>{if(!this.ready)return;const i=()=>{document.body.style.overflow="",this.embed=null,t?(Object.keys(this.elements).length&&(X(this.elements.buttons.play),X(this.elements.captions),X(this.elements.controls),X(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),O(e)&&e()):(ye.call(this),Me.cancelRequests.call(this),ee(this.elements.original,this.elements.container),ge.call(this,this.elements.original,"destroyed",!0),O(e)&&e.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(Xe.toggleNativeControls.call(this,!0),i()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&O(this.embed.destroy)&&this.embed.destroy(),i()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(i),setTimeout(i,200))}),e(this,"supports",e=>ce.mime.call(this,e)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=ce.touch,this.media=t,I(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||R(this.media)||q(this.media))&&(this.media=this.media[0]),this.config=J({},We,ft.defaults,i||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch(e){return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new Qe(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",ce),M(this.media)||!N(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!ce.check().api)return void this.debug.error("Setup failed: no support");const n=this.media.cloneNode(!0);n.autoplay=!1,this.elements.original=n;const s=this.media.tagName.toLowerCase();let a=null,r=null;switch(s){case"div":if(a=this.media.querySelector("iframe"),N(a)){if(r=Be(a.getAttribute("src")),this.provider=function(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?Je.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?Je.vimeo:null}(r.toString()),this.elements.container=this.media,this.media=a,this.elements.container.className="",r.search.length){const e=["1","true"];e.includes(r.searchParams.get("autoplay"))&&(this.config.autoplay=!0),e.includes(r.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=e.includes(r.searchParams.get("playsinline")),this.config.youtube.hl=r.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(B(this.provider)||!Object.values(Je).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type="video";break;case"video":case"audio":this.type=s,this.provider=Je.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=ce.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new Ze(this),this.storage=new Re(this),this.media.plyr=this,N(this.elements.container)||(this.elements.container=K("div",{tabindex:0}),G(this.media,this.elements.container)),Xe.migrateStyles.call(this),Xe.addStyleHook.call(this),ot.setup.call(this),this.config.debug&&pe.call(this,this.elements.container,this.config.events.join(" "),e=>{this.debug.log("event: "+e.type)}),this.fullscreen=new Ke(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Xe.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new lt(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>be(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new ht(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===Je.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===Je.youtube}get isVimeo(){return this.provider===Je.vimeo}get isVideo(){return"video"===this.type}get isAudio(){return"audio"===this.type}get playing(){return Boolean(this.ready&&!this.paused&&!this.ended)}get paused(){return Boolean(this.media.paused)}get stopped(){return Boolean(this.paused&&0===this.currentTime)}get ended(){return Boolean(this.media.ended)}set currentTime(e){if(!this.duration)return;const t=D(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:e}=this.media;return D(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}get seeking(){return Boolean(this.media.seeking)}get duration(){const e=parseFloat(this.config.duration),t=(this.media||{}).duration,i=D(t)&&t!==1/0?t:0;return e||i}set volume(e){let t=e;I(t)&&(t=Number(t)),D(t)||(t=this.storage.get("volume")),D(t)||({volume:t}=this.config),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!B(e)&&this.muted&&t>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(e){let t=e;L(t)||(t=this.storage.get("muted")),L(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t}get muted(){return Boolean(this.media.muted)}get hasAudio(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}set speed(e){let t=null;D(e)&&(t=e),D(t)||(t=this.storage.get("speed")),D(t)||(t=this.config.speed.selected);const{minimumSpeed:i,maximumSpeed:n}=this;t=ut(t,i,n),this.config.speed.selected=t,setTimeout(()=>{this.media&&(this.media.playbackRate=t)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(e){const t=this.config.quality,i=this.options.quality;if(!i.length)return;let n=[!B(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(D),s=!0;if(!i.includes(n)){const e=we(i,n);this.debug.warn(`Unsupported quality option: ${n}, using ${e} instead`),n=e,s=!1}t.selected=n,this.media.quality=n,s&&this.storage.set({quality:n})}get quality(){return this.media.quality}set loop(e){const t=L(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t}get loop(){return Boolean(this.media.loop)}set source(e){pt.change.call(this,e)}get source(){return this.media.currentSrc}get download(){const{download:e}=this.config.urls;return U(e)?e:this.source}set download(e){U(e)&&(this.config.urls.download=e,Ue.setDownloadUrl.call(this))}set poster(e){this.isVideo?Xe.setPoster.call(this,e,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const e=xe(Se.call(this));return q(e)?e.join(":"):e}set ratio(e){this.isVideo?I(e)&&Ee(e)?(this.config.ratio=xe(e),Pe.call(this)):this.debug.error(`Invalid aspect ratio specified (${e})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(e){this.config.autoplay=L(e)?e:this.config.autoplay}get autoplay(){return Boolean(this.config.autoplay)}toggleCaptions(e){$e.toggle.call(this,e,!1)}set currentTrack(e){$e.set.call(this,e,!1),$e.setup.call(this)}get currentTrack(){const{toggled:e,currentTrack:t}=this.captions;return e?t:-1}set language(e){$e.setLanguage.call(this,e,!1)}get language(){return($e.getCurrentTrack.call(this)||{}).language}set pip(e){if(!ce.pip)return;const t=L(e)?e:!this.pip;O(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?ze:"inline"),O(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}get pip(){return ce.pip?B(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===ze:null}setPreviewThumbnails(e){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,e),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new ht(this))}static supported(e,t,i){return ce.check(e,t,i)}static loadSprite(e,t){return je(e,t)}static setup(e,t={}){let i=null;return I(e)?i=Array.from(document.querySelectorAll(e)):R(e)?i=Array.from(e):q(e)&&(i=e.filter(N)),B(i)?null:i.map(e=>new ft(e,t))}}var mt;return ft.defaults=(mt=We,JSON.parse(JSON.stringify(mt))),ft}())}).call(this,i(151))},379:function(e,t,i){"undefined"!=typeof self&&self,e.exports=function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=14)}([function(e,t,i){(function(t){var i;i="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=i}).call(t,i(8))},function(e,t){function i(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function n(e,t){var i=k(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&l(e)}(e)&&y.call(e,"callee")&&(!b.call(e,"callee")||v.call(e)==h)}(e)?function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}(e.length,String):[],n=i.length,s=!!n;for(var r in e)!t&&!y.call(e,r)||s&&("length"==r||a(r,n))||i.push(r);return i}function s(e,t,i){var n=e[t];y.call(e,t)&&o(n,i)&&(void 0!==i||t in e)||(e[t]=i)}function a(e,t){return!!(t=null==t?d:t)&&("number"==typeof e||m.test(e))&&e>-1&&e%1==0&&e<t}function r(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||g)}function o(e,t){return e===t||e!=e&&t!=t}function l(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}(e.length)&&!function(e){var t=u(e)?v.call(e):"";return t==p||t==f}(e)}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function c(e){return l(e)?n(e):function(e){if(!r(e))return _(e);var t=[];for(var i in Object(e))y.call(e,i)&&"constructor"!=i&&t.push(i);return t}(e)}var d=9007199254740991,h="[object Arguments]",p="[object Function]",f="[object GeneratorFunction]",m=/^(?:0|[1-9]\d*)$/,g=Object.prototype,y=g.hasOwnProperty,v=g.toString,b=g.propertyIsEnumerable,_=function(e,t){return function(i){return e(t(i))}}(Object.keys,Object),w=Math.max,T=!b.call({valueOf:1},"valueOf"),k=Array.isArray,E=function(e){return function(e,t){return t=w(void 0===t?e.length-1:t,0),function(){for(var n=arguments,s=-1,a=w(n.length-t,0),r=Array(a);++s<a;)r[s]=n[t+s];s=-1;for(var o=Array(t+1);++s<t;)o[s]=n[s];return o[t]=r,i(e,this,o)}}((function(t,i){var n=-1,s=i.length,r=s>1?i[s-1]:void 0,c=s>2?i[2]:void 0;for(r=e.length>3&&"function"==typeof r?(s--,r):void 0,c&&function(e,t,i){if(!u(i))return!1;var n=typeof t;return!!("number"==n?l(i)&&a(t,i.length):"string"==n&&t in i)&&o(i[t],e)}(i[0],i[1],c)&&(r=s<3?void 0:r,s=1),t=Object(t);++n<s;){var d=i[n];d&&e(t,d)}return t}))}((function(e,t){if(T||r(t)||l(t))!function(e,t,i,n){i||(i={});for(var a=-1,r=t.length;++a<r;){var o=t[a],l=n?n(i[o],e[o],o,i,e):void 0;s(i,o,void 0===l?e[o]:l)}}(t,c(t),e);else for(var i in t)y.call(t,i)&&s(e,i,t[i])}));e.exports=E},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(i(0)),s={now:function(){var e=n.default.performance,t=e&&e.timing,i=e&&e.timeOrigin||t&&t.navigationStart;return"number"==typeof i&&"function"==typeof e.now?i+e.now():Date.now()}};t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){i=void 0===i?1:i,e[t]=e[t]||0,e[t]+=i}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(i(16)),s=n.default.methodFactory;n.default.methodFactory=function(e,t,i){var n=s(e,t,i);return function(){for(var e=["[mux]"],t=0;t<arguments.length;t++)e.push(arguments[t]);n.apply(void 0,e)}},n.default.setLevel(n.default.getLevel()),t.default=n.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if("string"!=typeof e||""===e)return["localhost"];var t=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4],i=void 0;return t&&(i=(t.match(/[^\.]+\.[^\.]+$/)||[])[0]),[t,i]};t.extractHostnameAndDomain=n,t.extractHostname=function(e){return n(e)[0]},t.extractDomain=function(e){return n(e)[1]}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},t.generateShortID=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};return(e=e||"").trim().split(/[\r\n]+/).forEach((function(e){if(e){var i=e.split(": "),s=i.shift();s&&(n.indexOf(s.toLowerCase())>=0||0===s.toLowerCase().indexOf("x-litix-"))&&(t[s]=i.join(": "))}})),t};var n=["x-cdn","content-type"]},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findMediaElement=t.getMuxPlayerId=void 0;var n=i(6),s=function(e){return e&&void 0!==e.nodeName?(e.muxId||(e.muxId=e.id||(0,n.generateShortID)()),e.muxId):e};t.getMuxPlayerId=s,t.findMediaElement=function(e){var t=void 0;return e&&void 0!==e.nodeName?e=s(t=e):t=document.querySelector(e),[t,e,t&&t.nodeName?t.nodeName.toLowerCase():""]}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return"1"===(n.default.doNotTrack||n.default.navigator&&(n.default.navigator.doNotTrack||n.default.navigator.msDoNotTrack))};var n=function(e){return e&&e.__esModule?e:{default:e}}(i(0))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(i(0)),s={exists:function(){var e=n.default.performance;return void 0!==(e&&e.timing)},domContentLoadedEventEnd:function(){var e=n.default.performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},navigationStart:function(){var e=n.default.performance,t=e&&e.timing;return t&&t.navigationStart}};t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};for(var i in e){var n=e[i];-1!==n["DATA-ID"].search("io.litix.data.")&&(t[n["DATA-ID"].replace("io.litix.data.","")]=n.VALUE)}return t}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[e[i]]=i);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={},i={};return Object.keys(e).forEach((function(n){var s=!1;if(e.hasOwnProperty(n)&&void 0!==e[n]){var r=n.split("_"),u=r[0],c=o[u];c||(a.default.info("Data key word `"+r[0]+"` not expected in "+n),c=u+"_"),r.splice(1).forEach((function(e){"url"===e&&(s=!0),l[e]?c+=l[e]:Number(e)&&Math.floor(Number(e))===Number(e)?c+=e:(a.default.info("Data key word `"+e+"` not expected in "+n),c+="_"+e+"_")})),s?i[c]=e[n]:t[c]=e[n]}})),(0,r.default)(t,i)};var a=n(i(4)),r=n(i(1)),o=s({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),l=s({ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",ca:"cached",cb:"cancel",cd:"code",cg:"category",ch:"changed",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",du:"duration",dv:"device",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ep:"experiments",fi:"first",fm:"family",ft:"format",fq:"frequency",fr:"frame",fs:"fullscreen",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",pt:"part",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"})},function(e,t,i){"use strict";e.exports=i(15).default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,s=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){s=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(s)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(i(0)),r=i(9),o=n(i(4)),l=n(i(10)),u=n(i(2)),c=n(i(17)),d=n(i(43)),h=n(i(47)),p=n(i(52)),f={},m=function e(t){var i=arguments;"string"==typeof t?e.hasOwnProperty(t)?a.default.setTimeout((function(){i=Array.prototype.splice.call(i,1),e[t].apply(null,i)}),0):o.default.warn("`"+t+"` is an unknown task"):"function"==typeof t?a.default.setTimeout((function(){t(e)}),0):o.default.warn("`"+t+"` is invalid.")};m.loaded=u.default.now(),m.NAME="mux-embed",m.VERSION="4.12.1",m.API_VERSION="2.1",m.PLAYER_TRACKED=!1,m.monitor=function(e,t){return(0,d.default)(m,e,t)},m.destroyMonitor=function(e){var t=(0,r.findMediaElement)(e),i=s(t,1)[0];i&&i.mux&&"function"==typeof i.mux.destroy?i.mux.destroy():o.default.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},m.addHLSJS=function(e,t){var i=(0,r.getMuxPlayerId)(e);f[i]?f[i].addHLSJS(t):o.default.error("A monitor for `"+i+"` has not been initialized.")},m.addDashJS=function(e,t){var i=(0,r.getMuxPlayerId)(e);f[i]?f[i].addDashJS(t):o.default.error("A monitor for `"+i+"` has not been initialized.")},m.removeHLSJS=function(e){var t=(0,r.getMuxPlayerId)(e);f[t]?f[t].removeHLSJS():o.default.error("A monitor for `"+t+"` has not been initialized.")},m.removeDashJS=function(e){var t=(0,r.getMuxPlayerId)(e);f[t]?f[t].removeDashJS():o.default.error("A monitor for `"+t+"` has not been initialized.")},m.init=function(e,t){(0,l.default)()&&t&&t.respectDoNotTrack&&o.default.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var i=(0,r.getMuxPlayerId)(e);f[i]=new c.default(m,i,t)},m.emit=function(e,t,i){var n=(0,r.getMuxPlayerId)(e);f[n]?(f[n].emit(t,i),"destroy"===t&&delete f[n]):o.default.error("A monitor for `"+n+"` has not been initialized.")},void 0!==a.default&&"function"==typeof a.default.addEventListener&&a.default.addEventListener("pagehide",(function(e){e.persisted||(m.WINDOW_UNLOADING=!0)}),!1),m.checkDoNotTrack=l.default,m.log=o.default,m.utils=h.default,m.events=p.default,t.default=m},function(e,t,i){var n,s;!function(a,r){"use strict";n=function(){function e(e,t){var i=e[t];if("function"==typeof i.bind)return i.bind(e);try{return Function.prototype.bind.call(i,e)}catch(t){return function(){return Function.prototype.apply.apply(i,[e,arguments])}}}function t(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function i(i){return"debug"===i&&(i="log"),typeof console!==l&&("trace"===i&&u?t:void 0!==console[i]?e(console,i):void 0!==console.log?e(console,"log"):o)}function n(e,t){for(var i=0;i<c.length;i++){var n=c[i];this[n]=i<e?o:this.methodFactory(n,e,t)}this.log=this.debug}function s(e,t,i){return function(){typeof console!==l&&(n.call(this,t,i),this[e].apply(this,arguments))}}function a(e,t,n){return i(e)||s.apply(this,arguments)}function r(e,t,i){function s(){var e;if(typeof window!==l&&u){try{e=window.localStorage[u]}catch(e){}if(typeof e===l)try{var t=window.document.cookie,i=t.indexOf(encodeURIComponent(u)+"=");-1!==i&&(e=/^([^;]+)/.exec(t.slice(i))[1])}catch(e){}return void 0===o.levels[e]&&(e=void 0),e}}var r,o=this;t=null==t?"WARN":t;var u="loglevel";"string"==typeof e?u+=":"+e:"symbol"==typeof e&&(u=void 0),o.name=e,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=i||a,o.getLevel=function(){return r},o.setLevel=function(t,i){if("string"==typeof t&&void 0!==o.levels[t.toUpperCase()]&&(t=o.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(r=t,!1!==i&&function(e){var t=(c[e]||"silent").toUpperCase();if(typeof window!==l&&u){try{return void(window.localStorage[u]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"="+t+";"}catch(e){}}}(t),n.call(o,t,e),typeof console===l&&t<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(e){t=e,s()||o.setLevel(e,!1)},o.resetLevel=function(){o.setLevel(t,!1),function(){if(typeof window!==l&&u){try{return void window.localStorage.removeItem(u)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};var d=s();null==d&&(d=t),o.setLevel(d,!1)}var o=function(){},l="undefined",u=typeof window!==l&&typeof window.navigator!==l&&/Trident\/|MSIE /.test(window.navigator.userAgent),c=["trace","debug","info","warn","error"],d=new r,h={};d.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=h[e];return t||(t=h[e]=new r(e,d.getLevel(),d.methodFactory)),t};var p=typeof window!==l?window.log:void 0;return d.noConflict=function(){return typeof window!==l&&window.log===d&&(window.log=p),d},d.getLoggers=function(){return h},d.default=d,d},void 0!==(s="function"==typeof n?n.call(t,i,t,e):n)&&(e.exports=s)}()},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,s=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){s=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(s)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(i(4)),r=n(i(1)),o=i(6),l=i(5),u=n(i(0)),c=n(i(11)),d=n(i(3)),h=i(18),p=i(19),f=n(i(20)),m=n(i(21)),g=n(i(22)),y=n(i(23)),v=n(i(24)),b=n(i(25)),_=n(i(26)),w=n(i(27)),T=n(i(28)),k=n(i(29)),E=n(i(30)),x=n(i(31)),S=n(i(32)),P=n(i(33)),A=n(i(34)),M=n(i(41)),C=n(i(42)),D=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],I=function(e,t,i){var n=this;this.DOM_CONTENT_LOADED_EVENT_END=c.default.domContentLoadedEventEnd(),this.NAVIGATION_START=c.default.navigationStart(),this.mux=e,this.id=t,(i=(0,r.default)({debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(e){return e}},i)).data=i.data||{},i.data.property_key&&(i.data.env_key=i.data.property_key,delete i.data.property_key),a.default.setLevel(i.debug?"debug":"warn"),this.getPlayheadTime=i.getPlayheadTime,this.getStateData=i.getStateData||function(){},this.getAdData=i.getAdData||function(){},this.minimumRebufferDuration=i.minimumRebufferDuration,this.sustainedRebufferThreshold=i.sustainedRebufferThreshold,this.playbackHeartbeatTime=i.playbackHeartbeatTime,this.disableRebufferTracking=i.disableRebufferTracking,this.disableRebufferTracking&&this.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),this.disablePlayheadRebufferTracking=i.disablePlayheadRebufferTracking,this.errorTranslator=i.errorTranslator,this.playbackEventDispatcher=new A.default(e,i.data.env_key,i),this.data={player_instance_id:(0,o.generateUUID)(),mux_sample_rate:i.sampleRate,beacon_domain:i.beaconCollectionDomain?i.beaconCollectionDomain:i.beaconDomain},this.data.view_sequence_number=1,this.data.player_sequence_number=1,this.oldEmit=this.emit,this.emit=function(e,t){t=(0,r.default)({viewer_time:this.mux.utils.now()},t),this.oldEmit(e,t)};var s=function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}.bind(this);this.on("viewinit",(function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),(0,r.default)(this.data,t),this._initializeViewData(),this.one("play",s),this.one("adbreakstart",s)}));var l=function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}.bind(this);if(this.on("videochange",(function(e,t){l(t)})),this.on("programchange",(function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),l((0,r.default)(t,{view_program_changed:!0})),s(),this.emit("play"),this.emit("playing")})),this.on("fragmentchange",(function(e,t){this.currentFragmentPDT=t.currentFragmentPDT,this.currentFragmentStart=t.currentFragmentStart})),this.on("destroy",this.destroy),void 0!==u.default&&"function"==typeof u.default.addEventListener&&"function"==typeof u.default.removeEventListener){var d=function(e){e.persisted||n.destroy()};u.default.addEventListener("pagehide",d,!1),this.on("destroy",(function(){u.default.removeEventListener("pagehide",d)}))}this.on("playerready",(function(e,t){(0,r.default)(this.data,t)})),D.forEach((function(e){n.on(e,(function(t,i){0!==e.indexOf("ad")&&this._updateStateData(),(0,r.default)(this.data,i),this._sanitizeData()})),n.on("after"+e,(function(){("error"!==e||this.viewErrored)&&this.send(e)}))})),this.on("viewend",(function(e,t){(0,r.default)(n.data,t)})),this.one("playerready",(function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time})),C.default.apply(this),g.default.apply(this),P.default.apply(this),E.default.apply(this),b.default.apply(this),m.default.apply(this),k.default.apply(this),y.default.apply(this),v.default.apply(this),x.default.apply(this),_.default.apply(this),w.default.apply(this),T.default.apply(this),S.default.apply(this),M.default.apply(this),i.hlsjs&&this.addHLSJS(i),i.dashjs&&this.addDashJS(i),this.emit("viewinit",i.data)};(0,r.default)(I.prototype,f.default.prototype),(0,r.default)(I.prototype,b.default.prototype),(0,r.default)(I.prototype,E.default.prototype),(0,r.default)(I.prototype,m.default.prototype),(0,r.default)(I.prototype,y.default.prototype),(0,r.default)(I.prototype,v.default.prototype),(0,r.default)(I.prototype,x.default.prototype),(0,r.default)(I.prototype,w.default.prototype),(0,r.default)(I.prototype,T.default.prototype),I.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),u.default.clearTimeout(this._heartBeatTimeout))},I.prototype.send=function(e){var t=(0,r.default)({},this.data);if(void 0===t.video_source_is_live&&(t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1)),t.video_source_is_live||["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"].forEach((function(e){t[e]=void 0})),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var i=(0,l.extractHostnameAndDomain)(t.video_source_url),n=s(i,2),a=n[0],o=n[1];t.video_source_domain=o,t.video_source_hostname=a}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,this._restartHeartBeat()},I.prototype._updateStateData=function(){(0,r.default)(this.data,this.getStateData()),this._updatePlayheadTime(),this._sanitizeData()},I.prototype._sanitizeData=function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach((function(t){var i=parseInt(e.data[t],10);e.data[t]=isNaN(i)?void 0:i})),["player_source_url","video_source_url"].forEach((function(t){if(e.data[t]){var i=e.data[t].toLowerCase();0!==i.indexOf("data:")&&0!==i.indexOf("blob:")||(e.data[t]="MSE style URL")}}))},I.prototype._resetVideoData=function(e,t){var i=this;Object.keys(this.data).forEach((function(e){0===e.indexOf("video_")&&delete i.data[e]}))},I.prototype._resetViewData=function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("view_")&&delete e.data[t]})),this.data.view_sequence_number=1},I.prototype._resetErrorData=function(e,t){delete this.data.player_error_code,delete this.data.player_error_message},I.prototype._initializeViewData=function(){var e=this,t=this.data.view_id=(0,o.generateUUID)(),i=function(){t===e.data.view_id&&(0,d.default)(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",i):i()},I.prototype._restartHeartBeat=function(){var e=this;u.default.clearTimeout(this._heartBeatTimeout),this.viewErrored||(this._heartBeatTimeout=u.default.setTimeout((function(){e.data.player_is_paused||e.emit("hb")}),1e4))},I.prototype.addHLSJS=function(e){return e.hlsjs?this.hlsjs?void this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,void(0,h.monitorHlsJs)(this.mux,this.id,e.hlsjs,{},e.Hls||u.default.Hls)):void this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")},I.prototype.removeHLSJS=function(){this.hlsjs&&((0,h.stopMonitoringHlsJs)(this.hlsjs),this.hlsjs=void 0)},I.prototype.addDashJS=function(e){return e.dashjs?this.dashjs?void this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,void(0,p.monitorDashJS)(this.mux,this.id,e.dashjs)):void this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")},I.prototype.removeDashJS=function(){this.dashjs&&((0,p.stopMonitoringDashJS)(this.dashjs),this.dashjs=void 0)},t.default=I},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.stopMonitoringHlsJs=t.monitorHlsJs=void 0;var s=n(i(7)),a=n(i(11)),r=i(5),o=n(i(12)),l=function(e){if(!e)return{};var t=a.default.navigationStart(),i=e.loading,n=i?i.start:e.trequest,s=i?i.first:e.tfirst,r=i?i.end:e.tload;return{bytesLoaded:e.total,requestStart:Math.round(t+n),responseStart:Math.round(t+s),responseEnd:Math.round(t+r)}},u=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return(0,s.default)(e.getAllResponseHeaders())};t.monitorHlsJs=function(e,t,i){var n=arguments[4],s=e.log,c=e.utils.secondsToMs,d=function(e){var t=parseInt(n.version),i=void 0;return 1===t&&null!==e.programDateTime&&(i=e.programDateTime),0===t&&null!==e.pdt&&(i=e.pdt),i};if(a.default.exists()){var h=function(i,n){return e.emit(t,i,n)},p=function(e,t){var i=t.levels,n=t.audioTracks,s=t.url,a=t.stats,c=t.networkDetails,d=t.sessionData,p={},f={},m={};m=(0,o.default)(d),i.forEach((function(e,t){p[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}})),n.forEach((function(e,t){f[t]={name:e.name,language:e.lang,bitrate:e.bitrate}}));var g=l(a),y=g.bytesLoaded,v=g.requestStart,b=g.responseStart,_=g.responseEnd;m.request_event_type=e,m.request_bytes_loaded=y,m.request_start=v,m.request_response_start=b,m.request_response_end=_,m.request_type="manifest",m.request_hostname=(0,r.extractHostname)(s),m.request_response_headers=u(c),m.request_rendition_lists={media:p,audio:f,video:{}},h("requestcompleted",m)};i.on(n.Events.MANIFEST_LOADED,p);var f=function(e,t){var i=t.details,n=t.level,s=t.networkDetails,a=t.stats,o=l(a),p=o.bytesLoaded,f=o.requestStart,m=o.responseStart,g=o.responseEnd,y=i.fragments[i.fragments.length-1],v=d(y)+c(y.duration);h("requestcompleted",{request_event_type:e,request_bytes_loaded:p,request_start:f,request_response_start:m,request_response_end:g,request_current_level:n,request_type:"manifest",request_hostname:(0,r.extractHostname)(i.url),request_response_headers:u(s),video_holdback:i.holdBack&&c(i.holdBack),video_part_holdback:i.partHoldBack&&c(i.partHoldBack),video_part_target_duration:i.partTarget&&c(i.partTarget),video_target_duration:i.targetduration&&c(i.targetduration),video_source_is_live:i.live,player_manifest_newest_program_time:isNaN(v)?void 0:v})};i.on(n.Events.LEVEL_LOADED,f);var m=function(e,t){var i=t.details,n=t.networkDetails,s=t.stats,a=l(s),o=a.bytesLoaded,c=a.requestStart,d=a.responseStart,p=a.responseEnd;h("requestcompleted",{request_event_type:e,request_bytes_loaded:o,request_start:c,request_response_start:d,request_response_end:p,request_type:"manifest",request_hostname:(0,r.extractHostname)(i.url),request_response_headers:u(n)})};i.on(n.Events.AUDIO_TRACK_LOADED,m);var g=function(e,t){var n=t.stats,s=t.networkDetails,a=t.frag,o=l(n),c={request_event_type:e,request_bytes_loaded:o.bytesLoaded,request_start:o.requestStart,request_response_start:o.responseStart,request_response_end:o.responseEnd,request_hostname:s?(0,r.extractHostname)(s.responseURL):void 0,request_response_headers:u(s),request_media_duration:a.duration};"main"===a.type?(c.request_type="media",c.request_current_level=a.level,c.request_video_width=(i.levels[a.level]||{}).width,c.request_video_height=(i.levels[a.level]||{}).height):c.request_type=a.type,h("requestcompleted",c)};i.on(n.Events.FRAG_LOADED,g);var y=function(e,t){var i=t.frag,n=i.start,s={currentFragmentPDT:d(i),currentFragmentStart:c(n)};h("fragmentchange",s)};i.on(n.Events.FRAG_CHANGED,y);var v=function(e,t){var i=t.type,s=t.details,a=t.response,o=t.fatal,l=t.context,u=t.frag;if(s===n.ErrorDetails.MANIFEST_LOAD_ERROR||s===n.ErrorDetails.MANIFEST_LOAD_TIMEOUT||s===n.ErrorDetails.FRAG_LOAD_ERROR||s===n.ErrorDetails.FRAG_LOAD_TIMEOUT||s===n.ErrorDetails.LEVEL_LOAD_ERROR||s===n.ErrorDetails.LEVEL_LOAD_TIMEOUT){var c=u&&u.url||l&&l.url||"";h("requestfailed",{request_error:s,request_url:c,request_hostname:(0,r.extractHostname)(c),request_type:s===n.ErrorDetails.FRAG_LOAD_ERROR||s===n.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":"manifest",request_error_code:a&&a.code,request_error_text:a&&a.text})}o&&h("error",{player_error_code:i,player_error_message:s})};i.on(n.Events.ERROR,v);var b=function(e,t){var i=t.frag,n=i&&i._url||"";h("requestcanceled",{request_cancel:e,request_url:n,request_type:"media",request_hostname:(0,r.extractHostname)(n)})};i.on(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,b);var _=function(e,t){var n=t.level,a=i.levels[n];if(a&&a.attrs&&a.attrs.BANDWIDTH){var r=a.attrs.BANDWIDTH;r?h("renditionchange",{video_source_bitrate:r,video_source_width:a.width,video_source_height:a.height}):s.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};i.on(n.Events.LEVEL_SWITCHED,_),i._stopMuxMonitor=function(){i.off(n.Events.MANIFEST_LOADED,p),i.off(n.Events.LEVEL_LOADED,f),i.off(n.Events.AUDIO_TRACK_LOADED,m),i.off(n.Events.FRAG_LOADED,g),i.off(n.Events.FRAG_CHANGED,y),i.off(n.Events.ERROR,v),i.off(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,b),i.off(n.Events.LEVEL_SWITCHED,_),i.off(n.Events.DESTROYING,i._stopMuxMonitor),delete i._stopMuxMonitor},i.on(n.Events.DESTROYING,i._stopMuxMonitor)}else s.warn("performance timing not supported. Not tracking HLS.js.")},t.stopMonitoringHlsJs=function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.stopMonitoringDashJS=t.monitorDashJS=void 0;var s=n(i(0)),a=n(i(7)),r=i(5),o=function(e,t){if(!e||"function"!=typeof e.getRequests)return{};var i=e.getRequests({state:"executed"});if(0===i.length)return{};var n=i[i.length-1],s=(0,r.extractHostname)(n.url),o=n.bytesLoaded,l=new Date(n.requestStartDate).getTime(),u=new Date(n.firstByteDate).getTime(),c=new Date(n.requestEndDate).getTime(),d=isNaN(n.duration)?0:n.duration,h="function"==typeof t.getMetricsFor?t.getMetricsFor(n.mediaType).HttpList:t.getDashMetrics().getHttpRequests(n.mediaType),p=void 0;return h.length>0&&(p=(0,a.default)(h[h.length-1]._responseHeaders||"")),{requestStart:l,requestResponseStart:u,requestResponseEnd:c,requestBytesLoaded:o,requestResponseHeaders:p,requestMediaDuration:d,requestHostname:s}},l=function(e,t){var i=t.getQualityFor(e),n=t.getCurrentTrackFor(e).bitrateList;return n?{currentLevel:i,renditionWidth:n[i].width||null,renditionHeight:n[i].height||null,renditionBitrate:n[i].bandwidth}:{}};t.monitorDashJS=function(e,t,i){var n=e.log;if(i&&i.on){var a=function(i,n){return e.emit(t,i,n)},u=function(e){var t=e.type,i=(e.data||{}).url;a("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:(0,r.extractHostname)(i)})};i.on("manifestLoaded",u);var c={},d=function(e){var t=e.type,n=e.fragmentModel,s=(e.chunk||{}).mediaInfo||{},r=s.type,l=s.bitrateList,u={};(l=l||[]).forEach((function(e,t){u[t]={},u[t].width=e.width,u[t].height=e.height,u[t].bitrate=e.bandwidth,u[t].attrs={}})),"video"===r?c.video=u:"audio"===r?c.audio=u:c.media=u;var d=o(n,i),h=d.requestStart,p=d.requestResponseStart,f=d.requestResponseEnd,m=d.requestResponseHeaders,g=d.requestMediaDuration,y=d.requestHostname;a("requestcompleted",{request_event_type:t,request_start:h,request_response_start:p,request_response_end:f,request_bytes_loaded:-1,request_type:r+"_init",request_response_headers:m,request_hostname:y,request_media_duration:g,request_rendition_lists:c})};i.on("initFragmentLoaded",d);var h=function(e){var t=e.type,n=e.fragmentModel,s=e.chunk||{},r=s.mediaInfo,u=s.start,c=(r||{}).type,d=o(n,i),h=d.requestStart,p=d.requestResponseStart,f=d.requestResponseEnd,m=d.requestBytesLoaded,g=d.requestResponseHeaders,y=d.requestMediaDuration,v=d.requestHostname,b=l(c,i),_=b.currentLevel,w=b.renditionWidth,T=b.renditionHeight,k=b.renditionBitrate;a("requestcompleted",{request_event_type:t,request_start:h,request_response_start:p,request_response_end:f,request_bytes_loaded:m,request_type:c,request_response_headers:g,request_hostname:v,request_media_start_time:u,request_media_duration:y,request_current_level:_,request_labeled_bitrate:k,request_video_width:w,request_video_height:T})};i.on("mediaFragmentLoaded",h);var p={video:void 0,audio:void 0,totalBitrate:void 0},f=function(){if(p.video&&"number"==typeof p.video.bitrate){if(!p.video.width||!p.video.height)return void n.warn("have bitrate info for video but missing width/height");var e=p.video.bitrate;return p.audio&&"number"==typeof p.audio.bitrate&&(e+=p.audio.bitrate),e!==p.totalBitrate?(p.totalBitrate=e,{video_source_bitrate:e,video_source_height:p.video.height,video_source_width:p.video.width}):void 0}},m=function(e,t,s){if("number"==typeof e.newQuality){var r=e.mediaType;if("audio"===r||"video"===r){var o=i.getBitrateInfoListFor(r).find((function(t){return t.qualityIndex===e.newQuality}));if(!o||"number"!=typeof o.bitrate)return void n.warn("missing bitrate info for "+r);p[r]=o;var l=f();l&&a("renditionchange",l)}}else n.warn("missing evt.newQuality in qualityChangeRendered event",e)};i.on("qualityChangeRendered",m);var g=function(e){var t=e.error,i=e.event,n=(i=i||{}).request||{},o=s.default.event&&s.default.event.currentTarget||{};a("requestfailed",{request_error:t+"_"+i.id+"_"+n.type,request_url:i.url,request_hostname:(0,r.extractHostname)(i.url),request_type:n.mediaType,request_error_code:o.status,request_error_type:o.statusText})};i.on("error",g),i._stopMuxMonitor=function(){i.off("manifestLoaded",u),i.off("initFragmentLoaded",d),i.off("mediaFragmentLoaded",h),i.off("qualityChangeRendered",m),i.off("error",g),delete i._stopMuxMonitor}}else n.warn("Invalid dash.js player reference. Monitoring blocked.")},t.stopMonitoringDashJS=function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){},s=0;n.prototype.on=function(e,t,i){return t._eventEmitterGuid=t._eventEmitterGuid||++s,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],i&&(t=t.bind(i)),this._listeners[e].push(t),t},n.prototype.off=function(e,t){var i=this._listeners&&this._listeners[e];i&&i.forEach((function(e,n){e._eventEmitterGuid===t._eventEmitterGuid&&i.splice(n,1)}))},n.prototype.one=function(e,t,i){var n=this;t._eventEmitterGuid=t._eventEmitterGuid||++s;var a=function s(){n.off(e,s),t.apply(i||this,arguments)};a._eventEmitterGuid=t._eventEmitterGuid,this.on(e,a)},n.prototype.emit=function(e,t){var i=this;if(this._listeners){t=t||{};var n=this._listeners["before*"]||[],s=this._listeners[e]||[],a=this._listeners["after"+e]||[],r=function(t,n){(t=t.slice()).forEach((function(t){t.call(i,{type:e},n)}))};r(n,t),r(s,t),r(a,t)}},t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(i(0)),s=function(){this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,this.on("playing",(function(){this._playheadShouldBeProgressing=!0})),this.on("play",this._startPlaybackHeartbeatInterval),this.on("playing",this._startPlaybackHeartbeatInterval),this.on("adbreakstart",this._startPlaybackHeartbeatInterval),this.on("adplay",this._startPlaybackHeartbeatInterval),this.on("adplaying",this._startPlaybackHeartbeatInterval),this.on("seeking",this._startPlaybackHeartbeatInterval),this.on("devicewake",this._startPlaybackHeartbeatInterval),this.on("viewstart",this._startPlaybackHeartbeatInterval),this.on("rebufferstart",this._startPlaybackHeartbeatInterval),this.on("pause",this._stopPlaybackHeartbeatInterval),this.on("ended",this._stopPlaybackHeartbeatInterval),this.on("viewend",this._stopPlaybackHeartbeatInterval),this.on("error",this._stopPlaybackHeartbeatInterval),this.on("aderror",this._stopPlaybackHeartbeatInterval),this.on("adpause",this._stopPlaybackHeartbeatInterval),this.on("adended",this._stopPlaybackHeartbeatInterval),this.on("adbreakend",this._stopPlaybackHeartbeatInterval),this.on("seeked",(function(){this.data.player_is_paused?this._stopPlaybackHeartbeatInterval():this._startPlaybackHeartbeatInterval()})),this.on("timeupdate",(function(){null!==this._playbackHeartbeatInterval&&this.emit("playbackheartbeat")})),this.on("devicesleep",(function(e,t){null!==this._playbackHeartbeatInterval&&(n.default.clearInterval(this._playbackHeartbeatInterval),this.emit("playbackheartbeatend",{viewer_time:t.viewer_time}),this._playbackHeartbeatInterval=null)}))};s.prototype._startPlaybackHeartbeatInterval=function(){var e=this;null===this._playbackHeartbeatInterval&&(this.emit("playbackheartbeat"),this._playbackHeartbeatInterval=n.default.setInterval((function(){e.emit("playbackheartbeat")}),this.playbackHeartbeatTime))},s.prototype._stopPlaybackHeartbeatInterval=function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(n.default.clearInterval(this._playbackHeartbeatInterval),this.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)},t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;this.on("viewinit",(function(){e.viewErrored=!1})),this.on("error",(function(){try{var t=e.errorTranslator({player_error_code:e.data.player_error_code,player_error_message:e.data.player_error_message});t?(e.data.player_error_code=t.player_error_code,e.data.player_error_message=t.player_error_message,e.viewErrored=!0):(delete e.data.player_error_code,delete e.data.player_error_message)}catch(t){e.mux.log.warn("Exception in error translator callback.",t),e.viewErrored=!0}}))}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(i(3)),s=function(){this._watchTimeTrackerLastCheckedTime=null,this.on("playbackheartbeat",this._updateWatchTime),this.on("playbackheartbeatend",this._clearWatchTimeState)};s.prototype._updateWatchTime=function(e,t){var i=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=i),(0,n.default)(this.data,"view_watch_time",i-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=i},s.prototype._clearWatchTimeState=function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null},t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(i(3)),s=function(){this._playbackTimeTrackerLastPlayheadPosition=-1,this.on("playbackheartbeat",this._updatePlaybackTime),this.on("playbackheartbeatend",this._clearPlaybackTimeState),this.on("seeking",this._clearPlaybackTimeState)};s.prototype._updatePlaybackTime=function(){var e=this.data.player_playhead_time;if(this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition){var t=e-this._playbackTimeTrackerLastPlayheadPosition;t<=1e3&&(0,n.default)(this.data,"view_content_playback_time",t)}this._playbackTimeTrackerLastPlayheadPosition=e},s.prototype._clearPlaybackTimeState=function(){this._updatePlaybackTime(),this._playbackTimeTrackerLastPlayheadPosition=-1},t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){this.on("playbackheartbeat",this._updatePlayheadTime),this.on("playbackheartbeatend",this._updatePlayheadTime),this.on("timeupdate",this._updatePlayheadTime),this.on("destroy",(function(){this.off("timeupdate",this._updatePlayheadTime)}))};n.prototype._updateMaxPlayheadPosition=function(){this.data.view_max_playhead_position=void 0===this.data.view_max_playhead_position?this.data.player_playhead_time:Math.max(this.data.view_max_playhead_position,this.data.player_playhead_time)},n.prototype._updatePlayheadTime=function(e,t){var i=this,n=function(){i.currentFragmentPDT&&i.currentFragmentStart&&(i.data.player_program_time=i.currentFragmentPDT+i.data.player_playhead_time-i.currentFragmentStart)};if(t&&t.player_playhead_time)this.data.player_playhead_time=t.player_playhead_time,n(),this._updateMaxPlayheadPosition();else if(this.getPlayheadTime){var s=this.getPlayheadTime();void 0!==s&&(this.data.player_playhead_time=s,n(),this._updateMaxPlayheadPosition())}},t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;if(!this.disableRebufferTracking){var t=void 0,i=function(){if(t){var i=e.data.viewer_time-t;(0,n.default)(e.data,"view_rebuffer_duration",i),t=e.data.viewer_time}e.data.view_watch_time>=0&&e.data.view_rebuffer_count>0&&(e.data.view_rebuffer_frequency=e.data.view_rebuffer_count/e.data.view_watch_time,e.data.view_rebuffer_percentage=e.data.view_rebuffer_duration/e.data.view_watch_time)};this.on("playbackheartbeat",(function(){return i()})),this.on("rebufferstart",(function(){t||((0,n.default)(e.data,"view_rebuffer_count",1),t=e.data.viewer_time,e.one("rebufferend",(function(){i(),t=void 0})))}))}};var n=function(e){return e&&e.__esModule?e:{default:e}}(i(3))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(i(2)),s=function(){this.disableRebufferTracking||this.disablePlayheadRebufferTracking||(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,this.on("playbackheartbeat",this._checkIfRebuffering),this.on("playbackheartbeatend",this._cleanupRebufferTracker),this.on("seeking",(function(){this._cleanupRebufferTracker(null,{viewer_time:n.default.now()})})))};s.prototype._checkIfRebuffering=function(e,t){return this.isSeeking||this.isAdBreak||!this._playheadShouldBeProgressing?void this._cleanupRebufferTracker(e,t):null===this._lastCheckedTime?void this._prepareRebufferTrackerState(t.viewer_time):this._lastPlayheadTime!==this.data.player_playhead_time?void this._cleanupRebufferTracker(e,t,!0):(t.viewer_time-this._lastPlayheadTimeUpdatedTime>=this.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),void(this._lastCheckedTime=t.viewer_time))},s.prototype._clearRebufferTrackerState=function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null},s.prototype._prepareRebufferTrackerState=function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e},s.prototype._cleanupRebufferTracker=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return;var n=this.data.player_playhead_time-this._lastPlayheadTime,s=t.viewer_time-this._lastPlayheadTimeUpdatedTime;n>0&&s-n>this.minimumRebufferDuration&&(this.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+s-n}))}i?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()},t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(i(2)),s=function(){this.on("viewinit",(function(){var e=this.data,t=e.view_id;if(!e.view_program_changed){var i=function(e,i){var s=i.viewer_time;"playing"===e.type&&void 0===this.data.view_time_to_first_frame?this.calculateTimeToFirstFrame(s||n.default.now(),t):"adplaying"!==e.type||void 0!==this.data.view_time_to_first_frame&&!this.inPrerollPosition()||this.calculateTimeToFirstFrame(s||n.default.now(),t)};this.one("playing",i),this.one("adplaying",i),this.one("viewend",(function(){this.off("playing",i),this.off("adplaying",i)}))}}))};s.prototype.calculateTimeToFirstFrame=function(e,t){t===this.data.view_id&&(this._updateWatchTime(null,{viewer_time:e}),this.data.view_time_to_first_frame=this.data.view_watch_time,(this.data.player_autoplay_on||this.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.data.view_aggregate_startup_time=this.data.view_start+this.data.view_watch_time-this.NAVIGATION_START))},t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;this.on("viewinit",(function(){this._lastPlayheadPosition=-1})),["pause","rebufferstart","seeking","error","adbreakstart","hb"].forEach((function(t){e.on(t,(function(){if(this._lastPlayheadPosition>=0&&this.data.player_playhead_time>=0&&this._lastPlayerWidth>=0&&this._lastSourceWidth>0&&this._lastPlayerHeight>=0&&this._lastSourceHeight>0){var e=this.data.player_playhead_time-this._lastPlayheadPosition;if(e<0)return void(this._lastPlayheadPosition=-1);var t=Math.min(this._lastPlayerWidth/this._lastSourceWidth,this._lastPlayerHeight/this._lastSourceHeight),i=Math.max(0,t-1),s=Math.max(0,1-t);this.data.view_max_upscale_percentage=Math.max(this.data.view_max_upscale_percentage||0,i),this.data.view_max_downscale_percentage=Math.max(this.data.view_max_downscale_percentage||0,s),(0,n.default)(this.data,"view_total_content_playback_time",e),(0,n.default)(this.data,"view_total_upscaling",i*e),(0,n.default)(this.data,"view_total_downscaling",s*e)}this._lastPlayheadPosition=-1}))})),["playing","hb"].forEach((function(t){e.on(t,(function(){this._lastPlayheadPosition=this.data.player_playhead_time,this._lastPlayerWidth=this.data.player_width,this._lastPlayerHeight=this.data.player_height,this._lastSourceWidth=this.data.video_source_width,this._lastSourceHeight=this.data.video_source_height}))}))};var n=function(e){return e&&e.__esModule?e:{default:e}}(i(3))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){this.isSeeking=!1,this.on("seeking",(function(e,t){(0,r.default)(this.data,t),this._lastSeekingTime=s.default.now(),!1===this.isSeeking&&(this.isSeeking=!0,this.send("seeking"))})),this.on("seeked",(function(){this.isSeeking=!1;var e=this._lastSeekingTime||s.default.now(),t=s.default.now()-e;(0,a.default)(this.data,"view_seek_count",1),(0,a.default)(this.data,"view_seek_duration",t);var i=this.data.view_max_seek_time||0;this.data.view_max_seek_time=Math.max(i,t)})),this.on("viewend",(function(){this.isSeeking=!1}))};var s=n(i(2)),a=n(i(3)),r=n(i(1))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,s=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){s=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(s)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(i(3)),r=i(5),o=n(i(1)),l=function(e,t){e.push(t),e.sort((function(e,t){return e.viewer_time-t.viewer_time}))},u=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror"],c=function(){var e=this;this.on("viewinit",(function(){this.isAdBreak=!1,this._currentAdRequestNumber=0,this._currentAdResponseNumber=0,this._adRequests=[],this._adResponses=[],this._adHasPlayed=!1,this._wouldBeNewAdPlay=!0,this._prerollPlayTime=void 0})),u.forEach((function(t){return e.on(t,e._updateAdData)}));var t=function(){e.isAdBreak=!1};this.on("adbreakstart",(function(){this.isAdBreak=!0})),this.on("play",t),this.on("playing",t),this.on("viewend",t),this.on("adrequest",(function(e,t){t=(0,o.default)({ad_request_id:"generatedAdRequestId"+this._currentAdRequestNumber++},t),l(this._adRequests,t),(0,a.default)(this.data,"view_ad_request_count"),this.inPrerollPosition()&&(this.data.view_preroll_requested=!0,this._adHasPlayed||(0,a.default)(this.data,"view_preroll_request_count"))})),this.on("adresponse",(function(e,t){t=(0,o.default)({ad_request_id:"generatedAdRequestId"+this._currentAdResponseNumber++},t),l(this._adResponses,t);var i=this.findAdRequest(t.ad_request_id);i&&(0,a.default)(this.data,"view_ad_request_time",Math.max(0,t.viewer_time-i.viewer_time))})),this.on("adplay",(function(e,t){this._adHasPlayed=!0,this._wouldBeNewAdPlay&&(this._wouldBeNewAdPlay=!1,(0,a.default)(this.data,"view_ad_played_count")),this.inPrerollPosition()&&!this.data.view_preroll_played&&(this.data.view_preroll_played=!0,this._adRequests.length>0&&(this.data.view_preroll_request_time=Math.max(0,t.viewer_time-this._adRequests[0].viewer_time)),this.data.view_start&&(this.data.view_startup_preroll_request_time=Math.max(0,t.viewer_time-this.data.view_start)),this._prerollPlayTime=t.viewer_time)})),this.on("adplaying",(function(e,t){this.inPrerollPosition()&&void 0===this.data.view_preroll_load_time&&void 0!==this._prerollPlayTime&&(this.data.view_preroll_load_time=t.viewer_time-this._prerollPlayTime,this.data.view_startup_preroll_load_time=t.viewer_time-this._prerollPlayTime)})),this.on("adended",(function(){this._wouldBeNewAdPlay=!0})),this.on("aderror",(function(){this._wouldBeNewAdPlay=!0}))};c.prototype.inPrerollPosition=function(){return void 0===this.data.view_content_playback_time||this.data.view_content_playback_time<=1e3},c.prototype.findAdRequest=function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]},c.prototype._updateAdData=function(e,t){if(this.inPrerollPosition()){if(!this.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var i=(0,r.extractHostnameAndDomain)(t.ad_tag_url),n=s(i,2),a=n[0],o=n[1];this.data.view_preroll_ad_tag_domain=o,this.data.view_preroll_ad_tag_hostname=a}if(!this.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var l=(0,r.extractHostnameAndDomain)(t.ad_asset_url),u=s(l,2),c=u[0],d=u[1];this.data.view_preroll_ad_asset_domain=d,this.data.view_preroll_ad_asset_hostname=c}}},t.default=c},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this,t=void 0,i=void 0,n=function(){e.disableRebufferTracking||t&&((0,a.default)(e.data,"view_waiting_rebuffer_duration",s.default.now()-t),t=!1,window.clearInterval(i))},r=!1,o=function(){r=!1,n()};this.on("waiting",(function(){r&&(e.disableRebufferTracking||((0,a.default)(e.data,"view_waiting_rebuffer_count",1),t=s.default.now(),i=window.setInterval((function(){if(t){var i=s.default.now();(0,a.default)(e.data,"view_waiting_rebuffer_duration",i-t),t=i}}),250)))})),this.on("playing",(function(){n(),r=!0})),this.on("pause",o),this.on("seeking",o)};var s=n(i(2)),a=n(i(3))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;this.one("playbackheartbeat",r),this.on("playbackheartbeatend",(function(){e.off("before*",o),e.one("playbackheartbeat",r)}))};var s=n(i(1)),a=n(i(2)),r=function(){this.lastWallClockTime=a.default.now(),this.on("before*",o)},o=function(e){var t=a.default.now(),i=this.lastWallClockTime;this.lastWallClockTime=t,t-i>3e4&&(this.emit("devicesleep",{viewer_time:i}),(0,s.default)(this.data,{viewer_time:i}),this.send("devicesleep"),this.emit("devicewake",{viewer_time:t}),(0,s.default)(this.data,{viewer_time:t}),this.send("devicewake"))}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(i(0)),r=i(35),o=n(i(4)),l=n(i(38)),u=n(i(10)),c=n(i(39)),d=n(i(13)),h=n(i(40)),p=n(i(1)),f=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id"],m=["viewstart","error","ended","viewend"],g=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.mux=e,this.envKey=t,this.eventQueue=new h.default((0,l.default)(t,i)),this.previousBeaconData=null,this.lastEventTime=null,this.sampleRate=i.sampleRate,this.disableCookies=i.disableCookies,this.respectDoNotTrack=i.respectDoNotTrack;var n=i.platform||{};this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:n.name,viewer_application_version:n.version,viewer_application_engine:n.layout,viewer_device_name:n.product,viewer_device_category:"",viewer_device_manufacturer:n.manufacturer,viewer_os_family:n.os&&n.os.family,viewer_os_architecture:n.os&&n.os.architecture,viewer_os_version:n.os&&n.os.version};var s=(0,c.default)();s&&(this.pageLevelData=(0,p.default)(this.pageLevelData,{viewer_connection_type:s})),void 0!==a.default&&a.default.location&&a.default.location.href&&(this.pageLevelData.page_url=a.default.location.href),this.viewerData=this.disableCookies?{}:(0,r.getAndUpdateViewerData)()};g.prototype.send=function(e,t){if(e){if(this.respectDoNotTrack&&(0,u.default)())return o.default.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!==(void 0===t?"undefined":s(t)))return o.default.error("A data object was expected in send() but was not provided");var i=this.disableCookies?{}:(0,r.getAndUpdateSessionData)(),n={};(0,p.default)(n,this.pageLevelData),(0,p.default)(n,t),(0,p.default)(n,i),(0,p.default)(n,this.viewerData),n.event=e,n.env_key=this.envKey,n.user_id&&(n.viewer_user_id=n.user_id,delete n.user_id);var a=n.mux_sample_number>=this.sampleRate,l=this._deduplicateBeaconData(e,n),c=(0,d.default)(l);if(this.lastEventTime=this.mux.utils.now(),a)return o.default.info("Not sending event due to sample rate restriction",e,n,c);if(this.envKey||o.default.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,n,c),!this.rateLimited)if(o.default.info("Sending event",e,n,c),this.rateLimited=!this.eventQueue.queueEvent(e,c),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if((m.indexOf(e)>=0||!1===this.mux.WINDOW_VISIBLE&&"hb"===e)&&this.eventQueue.flushEvents(),this.rateLimited)return n.event="eventrateexceeded",c=(0,d.default)(n),this.eventQueue.queueEvent(n.event,c),o.default.error("Beaconing disabled due to rate limit.")}},g.prototype.destroy=function(){this.eventQueue.destroy(!1)};var y=function(e,t,i,n){return!(!e||0!==t.indexOf("request_")||"request_response_headers"!==t&&"object"===(void 0===i?"undefined":s(i))&&"object"===(void 0===n?"undefined":s(n))&&Object.keys(i||{}).length===Object.keys(n||{}).length)};g.prototype._deduplicateBeaconData=function(e,t){var i=this,n={},s=t.view_id;if(!s||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)n=(0,p.default)({},t),s&&(this.previousBeaconData=n),s&&"viewend"===e&&(this.previousBeaconData=null);else{var a=0===e.indexOf("request");Object.keys(t).forEach((function(s){var r=t[s];(r!==i.previousBeaconData[s]||f.indexOf(s)>-1||y(a,s,r,i.previousBeaconData[s])||function(e,t){return"renditionchange"===e&&0===t.indexOf("video_source_")}(e,s))&&(n[s]=r,i.previousBeaconData[s]=r)}))}return n},t.default=g},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getAndUpdateSessionData=t.getAndUpdateViewerData=void 0;var s=n(i(36)),a=n(i(37)),r=i(6),o=n(i(2)),l=function(){var e=void 0;try{e=s.default.parse(a.default.get("muxData")||"")}catch(t){e={}}return e},u=function(e){try{a.default.set("muxData",s.default.stringify(e),{expires:7300})}catch(e){}};t.getAndUpdateViewerData=function(){var e=l();return e.mux_viewer_id=e.mux_viewer_id||(0,r.generateUUID)(),e.msn=e.msn||Math.random(),u(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}},t.getAndUpdateSessionData=function(){var e=l(),t=o.default.now();return e.session_start&&(e.sst=e.session_start,delete e.session_start),e.session_id&&(e.sid=e.session_id,delete e.session_id),e.session_expires&&(e.sex=e.session_expires,delete e.session_expires),(!e.sex||e.sex<t)&&(e.sid=(0,r.generateUUID)(),e.sst=t),e.sex=t+15e5,u(e),{session_id:e.sid,session_start:e.sst,session_expires:e.sex}}},function(e,t,i){"use strict";function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function s(e){try{return encodeURIComponent(e)}catch(e){return null}}var a=Object.prototype.hasOwnProperty;t.stringify=function(e,t){t=t||"";var i,n,r=[];for(n in"string"!=typeof t&&(t="?"),e)if(a.call(e,n)){if((i=e[n])||null!=i&&!isNaN(i)||(i=""),n=s(n),i=s(i),null===n||null===i)continue;r.push(n+"="+i)}return r.length?t+r.join("&"):""},t.parse=function(e){for(var t,i=/([^=?#&]+)=?([^&]*)/g,s={};t=i.exec(e);){var a=n(t[1]),r=n(t[2]);null===a||null===r||a in s||(s[a]=r)}return s}},function(e,t,i){"use strict";var n,s,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r){var o=!1;if(void 0!==(s="function"==typeof(n=r)?n.call(t,i,t,e):n)&&(e.exports=s),o=!0,"object"===a(t)&&(e.exports=r(),o=!0),!o){var l=window.Cookies,u=window.Cookies=r();u.noConflict=function(){return window.Cookies=l,u}}}((function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t};return function t(i){function n(t,s,a){var r;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},n.defaults,a)).expires){var o=new Date;o.setMilliseconds(o.getMilliseconds()+864e5*a.expires),a.expires=o}try{r=JSON.stringify(s),/^[\{\[]/.test(r)&&(s=r)}catch(t){}return s=i.write?i.write(s,t):encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",s,a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}t||(r={});for(var l=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,c=0;c<l.length;c++){var d=l[c].split("="),h=d.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var p=d[0].replace(u,decodeURIComponent);if(h=i.read?i.read(h,p):i(h,p)||h.replace(u,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(t){}if(t===p){r=h;break}t||(r[p]=h)}catch(t){}}return r}}return n.set=n,n.get=function(e){return n.call(n,e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,i){n(t,"",e(i,{expires:-1}))},n.withConverter=t,n}((function(){}))}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var i=t.beaconCollectionDomain,n=t.beaconDomain;if(i)return"https://"+i;var s=n||"litix.io";return(e=e||"inferred").match(/^[a-z0-9]+$/)?"https://"+e+"."+s:"https://img.litix.io/a.gif"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(i(0)),s=function(){var e=n.default.navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};t.default=function(){var e=void 0;switch(s()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(i(0)),a=n(i(4)),r=n(i(1)),o=n(i(13)),l=n(i(2)),u={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},c=["hb","requestcompleted","requestfailed","requestcanceled"],d=function(e,t){this._beaconUrl=e||"https://img.litix.io",this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=(0,r.default)({},u,t)};d.prototype.queueEvent=function(e,t){var i=(0,r.default)({},t);return(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(i),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength)},d.prototype.flushEvents=function(){this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending()},d.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),s.default.clearTimeout(this._sendTimeout)},d.prototype._clearBeaconQueue=function(){var e=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,t=this._eventQueue.slice(e);e>0&&(0,r.default)(t[t.length-1],(0,o.default)({mux_view_message:"event queue truncated"}));var i=this._createPayload(t);h(this._beaconUrl,i,!0,(function(){}))},d.prototype._sendBeaconQueue=function(){var e=this;if(!this._postInFlight){var t=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var i=this._createPayload(t),n=l.default.now();h(this._beaconUrl,i,!1,(function(i,s){s?(e._eventQueue=t.concat(e._eventQueue),e._failureCount+=1,a.default.info("Error sending beacon: "+s)):e._failureCount=0,e._roundTripTime=l.default.now()-n,e._postInFlight=!1}))}},d.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},d.prototype._startBeaconSending=function(){var e=this;s.default.clearTimeout(this._sendTimeout),this.destroyed||(this._sendTimeout=s.default.setTimeout((function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()}),this._getNextBeaconTime()))},d.prototype._createPayload=function(e){var t=this,i={transmission_timestamp:Math.round(l.default.now())};this._roundTripTime&&(i.rtt_ms=Math.round(this._roundTripTime));var n=void 0,s=void 0,r=void 0,o=function(){n=JSON.stringify({metadata:i,events:s||e}),r=n.length/1024},u=function(){return r<=t._options.maxPayloadKBSize};return o(),u()||(a.default.info("Payload size is too big ("+r+" kb). Removing unnecessary events."),s=e.filter((function(e){return-1===c.indexOf(e.e)})),o()),u()||(a.default.info("Payload size still too big ("+r+" kb). Cropping fields.."),s.forEach((function(e){for(var t in e){var i=e[t];"string"==typeof i&&i.length>51200&&(e[t]=i.substring(0,51200))}})),o()),n};var h=function(e,t,i,n){if(i&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(e,t))n();else if(s.default.fetch)s.default.fetch(e,{method:"POST",body:t,headers:{"Content-Type":"text/plain"},keepalive:!0}).then((function(e){return n(null,e.ok?null:"Error")})).catch((function(e){return n(null,e)}));else{if(s.default.XMLHttpRequest){var a=new s.default.XMLHttpRequest;return a.onreadystatechange=function(){if(4===a.readyState)return n(null,200!==a.status?"error":void 0)},a.open("POST",e),a.setRequestHeader("Content-Type","text/plain"),void a.send(t)}n()}};t.default=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0,t=0,i=0,n=0,s=0,a=0,r=0;this.on("requestcompleted",(function(a,r){var o=r.request_start,l=r.request_response_start,u=r.request_response_end,c=r.request_bytes_loaded;n++;var d=void 0,h=void 0;if(l?(d=l-o,h=u-l):h=u-o,h>0&&c>0){var p=c/h*8e3;s++,t+=c,i+=h,this.data.view_min_request_throughput=Math.min(this.data.view_min_request_throughput||1/0,p),this.data.view_average_request_throughput=t/i*8e3,this.data.view_request_count=n,d>0&&(e+=d,this.data.view_max_request_latency=Math.max(this.data.view_max_request_latency||0,d),this.data.view_average_request_latency=e/s)}})),this.on("requestfailed",(function(e,t){n++,a++,this.data.view_request_count=n,this.data.view_request_failed_count=a})),this.on("requestcanceled",(function(e,t){n++,r++,this.data.view_request_count=n,this.data.view_request_canceled_count=r}))}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;this.on("before*",(function(t,i){var n=i.viewer_time,o=a.default.now(),l=e._lastEventTime;if(e._lastEventTime=o,l&&o-l>r){var u=Object.keys(e.data).reduce((function(t,i){return 0===i.indexOf("video_")?(0,s.default)(t,function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({},i,e.data[i])):t}),{});e.mux.log.info("Received event after at least an hour inactivity, creating a new view"),e.emit("viewinit",(0,s.default)({viewer_time:n},u)),e._playheadShouldBeProgressing&&"play"!==t.type&&"adbreakstart"!==t.type&&(e.emit("play",{viewer_time:n}),"playing"!==t.type&&e.emit("playing",{viewer_time:n}))}}))};var s=n(i(1)),a=n(i(2)),r=36e5},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,s=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){s=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(s)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e,t,i){var n=(0,o.findMediaElement)(t),d=a(n,3),h=d[0],p=d[1],f=d[2],m=e.log,g=e.utils.getComputedStyle,y=e.utils.secondsToMs;if(!h)return m.error("No element was found with the `"+p+"` query selector.");if("video"!==f&&"audio"!==f)return m.error("The element of `"+p+"` was not a media element.");(i=(0,r.default)({automaticErrorTracking:!0},i)).data=(0,r.default)({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:"4.12.1"},i.data),i.getPlayheadTime=function(){return y(h.currentTime)},i.getStateData=function(){var e=this.hlsjs&&this.hlsjs.url,t=this.dashjs&&s("function"===this.dashjs.getSource)&&this.dashjs.getSource(),n={player_is_paused:h.paused,player_playhead_time:y(h.currentTime),player_width:parseInt(g(h,"width")),player_height:parseInt(g(h,"height")),player_autoplay_on:h.autoplay,player_preload_on:h.preload,player_language_code:h.lang,player_is_fullscreen:(0,l.default)(),video_poster_url:h.poster,video_source_url:e||t||h.currentSrc,video_source_duration:y(h.duration),video_source_height:h.videoHeight,video_source_width:h.videoWidth},a=i.getPlayheadTime();if(h.getStartDate&&a>0){var r=h.getStartDate();if(r&&"function"==typeof r.getTime&&r.getTime()){var o=r.getTime();if(n.player_program_time=o+a,h.seekable.length>0){var u=o+h.seekable.end(h.seekable.length-1);n.player_live_edge_program_time=u}}}return n},h.mux=h.mux||{},h.mux.deleted=!1,h.mux.emit=function(t,i){e.emit(p,t,i)};var v=function(){m.error("The monitor for this video element has already been destroyed.")};h.mux.destroy=function(){Object.keys(h.mux.listeners).forEach((function(e){h.removeEventListener(e,h.mux.listeners[e],!1)})),delete h.mux.listeners,h.mux.destroy=v,h.mux.swapElement=v,h.mux.emit=v,h.mux.addHLSJS=v,h.mux.addDashJS=v,h.mux.removeHLSJS=v,h.mux.removeDashJS=v,h.mux.deleted=!0,e.emit(p,"destroy")},h.mux.swapElement=function(t){var i=(0,o.findMediaElement)(t),n=a(i,3),s=n[0],l=n[1],u=n[2];return s?"video"!==u&&"audio"!==u?e.log.error("The element of `"+l+"` was not a media element."):(s.muxId=h.muxId,delete h.muxId,s.mux=s.mux||{},s.mux.listeners=(0,r.default)({},h.mux.listeners),delete h.mux.listeners,Object.keys(s.mux.listeners).forEach((function(e){h.removeEventListener(e,s.mux.listeners[e],!1),s.addEventListener(e,s.mux.listeners[e],!1)})),s.mux.swapElement=h.mux.swapElement,s.mux.destroy=h.mux.destroy,delete h.mux,void(h=s)):e.log.error("No element was found with the `"+l+"` query selector.")},h.mux.addHLSJS=function(t){e.addHLSJS(p,t)},h.mux.addDashJS=function(t){e.addDashJS(p,t)},h.mux.removeHLSJS=function(){e.removeHLSJS(p)},h.mux.removeDashJS=function(){e.removeDashJS(p)},e.init(p,i),e.emit(p,"playerready"),h.paused||(e.emit(p,"play"),h.readyState>2&&e.emit(p,"playing")),h.mux.listeners={},u.forEach((function(t){("error"!==t||i.automaticErrorTracking)&&(h.mux.listeners[t]=function(){var i={};if("error"===t){if(!h.error)return;if(1===h.error.code)return;i.player_error_code=h.error.code,i.player_error_message=c[h.error.code]||h.error.message}e.emit(p,t,i)},h.addEventListener(t,h.mux.listeners[t],!1))}))};var r=n(i(1)),o=i(9),l=n(i(44)),u=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],c={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n.default&&!!(n.default.fullscreenElement||n.default.webkitFullscreenElement||n.default.mozFullScreenElement||n.default.msFullscreenElement)};var n=function(e){return e&&e.__esModule?e:{default:e}}(i(45))},function(e,t,i){(function(t){var n,s=void 0!==t?t:"undefined"!=typeof window?window:{},a=i(46);"undefined"!=typeof document?n=document:(n=s["__GLOBAL_DOCUMENT_CACHE@4"])||(n=s["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=n}).call(t,i(8))},function(e,t){},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(i(48)),a=n(i(3)),r=n(i(49)),o=n(i(50)),l=n(i(1)),u=n(i(7)),c=i(5),d=n(i(2)),h=n(i(51)),p=i(6),f={};f.safeCall=s.default,f.safeIncrement=a.default,f.getComputedStyle=r.default,f.secondsToMs=o.default,f.assign=l.default,f.headersStringToObject=u.default,f.extractHostnameAndDomain=c.extractHostnameAndDomain,f.extractHostname=c.extractHostname,f.now=d.default.now,f.manifestParser=h.default,f.generateShortID=p.generateShortID,f.generateUUID=p.generateUUID,t.default=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i,s){var a=s;if(e&&"function"==typeof e[t])try{a=e[t].apply(e,i)}catch(e){n.default.info("safeCall error",e)}return a};var n=function(e){return e&&e.__esModule?e:{default:e}}(i(4))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e&&t&&n.default&&"function"==typeof n.default.getComputedStyle){var i=void 0;return s&&s.has(e)&&(i=s.get(e)),i||(i=n.default.getComputedStyle(e,null),s&&s.set(e,i)),i.getPropertyValue(t)}};var n=function(e){return e&&e.__esModule?e:{default:e}}(i(0)),s=void 0;n.default&&n.default.WeakMap&&(s=new WeakMap)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Math.floor(1e3*e)}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(i(1)),a=n(i(12)),r="#EXT-X-TARGETDURATION",o="#EXT-X-PART-INF",l="#EXT-X-SERVER-CONTROL",u="#EXTINF",c="#EXT-X-PROGRAM-DATE-TIME",d="#EXT-X-VERSION",h="#EXT-X-SESSION-DATA",p=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};p.prototype.process=function(e){var t=void 0;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},p.prototype.processLine=function(e){var t=e.indexOf(":"),i=_(e,t),n=i[0],p=2===i.length?g(i[1]):void 0;if("#"!==n[0])this.currentUri.uri=n,this.manifest.segments.push(this.currentUri),!this.manifest.targetDuration||"duration"in this.currentUri||(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(n){case r:if(!isFinite(p)||p<0)return;this.manifest.targetDuration=p,this.setHoldBack();break;case o:f(this.manifest,i),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break;case l:f(this.manifest,i),this.setHoldBack();break;case u:0===p?this.currentUri.duration=.01:p>0&&(this.currentUri.duration=p);break;case c:var m=p,y=new Date(m);this.manifest.dateTimeString||(this.manifest.dateTimeString=m,this.manifest.dateTimeObject=y),this.currentUri.dateTimeString=m,this.currentUri.dateTimeObject=y;break;case d:f(this.manifest,i);break;case h:var v=w(i[1]),b=(0,a.default)(v);(0,s.default)(this.manifest.sessionData,b)}},p.prototype.setHoldBack=function(){var e=this.manifest,t=e.serverControl,i=e.targetDuration,n=e.partTargetDuration;if(t){var s="holdBack",a="partHoldBack",r=i&&3*i,o=n&&2*n;i&&!t.hasOwnProperty(s)&&(t[s]=r),r&&t[s]<r&&(t[s]=r),n&&!t.hasOwnProperty(a)&&(t[a]=3*n),n&&t[a]<o&&(t[a]=o)}};var f=function(e,t){var i=m(t[0].replace("#EXT-X-","")),n=void 0;b(t[1])?(n={},n=(0,s.default)(v(t[1]),n)):n=g(t[1]),e[i]=n},m=function(e){return e.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()}))},g=function(e){if("yes"===e.toLowerCase()||"no"===e.toLowerCase())return"yes"===e.toLowerCase();var t=-1!==e.indexOf(":")?e:parseFloat(e);return isNaN(t)?e:t},y=function(e){var t={},i=e.split("=");return i.length>1&&(t[m(i[0])]=g(i[1])),t},v=function(e){for(var t=e.split(","),i={},n=0;t.length>n;n++){var a=t[n],r=y(a);i=(0,s.default)(r,i)}return i},b=function(e){return e.indexOf("=")>-1},_=function(e,t){return-1===t?[e]:[e.substring(0,t),e.substring(t+1)]},w=function(e){var t={};if(e){var i=e.search(",");return[e.slice(0,i),e.slice(i+1)].forEach((function(e,i){for(var n=e.replace(/['"]+/g,"").split("="),s=0;s<n.length;s++)"DATA-ID"===n[s]&&(t["DATA-ID"]=n[1-s]),"VALUE"===n[s]&&(t.VALUE=n[1-s])})),{data:t}}};t.default=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled"}}])},545:function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},546:function(e,t,i){var n=i(209),s=i(547);function a(t,i,r){return s()?(e.exports=a=Reflect.construct,e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,i){var s=[null];s.push.apply(s,t);var a=new(Function.bind.apply(e,s));return i&&n(a,i.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(null,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},547:function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);